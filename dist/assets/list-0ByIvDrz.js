import{j as e,p as E,n as I,dP as S,r,dN as L,w as l,cY as N,ad as p,q as B,I as d,e4 as G,cM as k,H as v,l as F}from"./index-CZQdhxL6.js";import"./category-new-edit-form-BhytC40s.js";import{E as u}from"./empty-content-CNoNRi_C.js";import{C as O}from"./confirm-dialog-1qdBg838.js";import{C as A}from"./custom-breadcrumbs-Cstz3_WJ.js";import{C as H}from"./Card-BpNMtBWE.js";import{D as P,g as T,G as h}from"./DataGrid-CNCw2_-4.js";import"./form-provider-CgY9D6Kg.js";import"./Rating-CUg9OHpq.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-CDG2HKGW.js";import"./index-SBExoyVP.js";import"./Slider-Cgtky4hB.js";import"./RadioGroup-Cdn6J0S9.js";import"./FormGroup-BHWDss9q.js";import"./FormControlLabel-BkPFkiPo.js";import"./index-BlO45MYk.js";import"./countries-DSLisFCy.js";import"./search-not-found-DUPrzHz6.js";import"./MenuItem-B-kec-ET.js";import"./listItemTextClasses-tNQx_Nyt.js";import"./ListItemText-Cr03FIqH.js";import"./InputAdornment-FYGjj27N.js";import"./country-select-DInEscmA.js";import"./Checkbox-vPWnpj5r.js";import"./upload-Cc3l3Jk3.js";import"./preview-multi-file-DA87ns5L.js";import"./format-number-BMTKi65b.js";import"./file-thumbnail-DwL3Xnqg.js";import"./upload-box-BxodnsWX.js";import"./upload-avatar-B-zuBAMk.js";import"./image-BKqVmPzF.js";import"./DatePicker-DnV5-WsQ.js";import"./DialogActions-q6AF7Mz6.js";import"./ListItem-B0RV7hht.js";import"./listItemButtonClasses-DXIYlEZ6.js";import"./dialogTitleClasses-CEl360C-.js";import"./DialogContent-DclWW8HV.js";import"./MobileDateTimePicker-8HOBSqCX.js";import"./Tabs-B1eQZdBL.js";import"./KeyboardArrowRight-CiRDKZM6.js";import"./index-gG0s9846.js";import"./CardHeader-OkCeJUez.js";import"./LoadingButton-CHo-zp-G.js";import"./CircularProgress-BNfym32c.js";import"./DialogTitle-0aPq7ynf.js";import"./Link-aHbKcscn.js";import"./ListItemIcon-NuDwzs-Y.js";import"./ClickAwayListener-BfojFMc1.js";import"./Skeleton-hEu7t3F6.js";import"./TablePagination-BnD_foh1.js";import"./LastPage-BXs-7qE5.js";import"./TableCell-DpYGOSsU.js";function V({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.id})}function $({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.name})}function X({params:o}){return o.row.createBy.email}function f(o,n=0,s=null){let a=[];return o.forEach(i=>{a.push({...i,level:n,parentId:s,categories:[]}),i.categories&&i.categories.length>0&&(a=a.concat(f(i.categories,n+1,i.id)))}),a}const _={category:!1,id:!1},U=["category","actions"];function q(){const o=E(),n=I(),{categories:s,categoriesLoading:a}=S(),[i,g]=r.useState([]),[m,x]=r.useState([]),[C,b]=r.useState(null),[w,j]=r.useState(_);r.useEffect(()=>{if(s.length){const t=f(s);g(t)}},[s]);const y=async t=>{await G(t),k.success("Xóa thành công!")},D=r.useCallback(async()=>{await Promise.all(m.map(t=>L(t.toString())))},[m]),R=r.useCallback(t=>{n.push(l.dashboard.category.edit(t))},[n]),c=[{field:"category",headerName:"Category",filterable:!1},{field:"id",headerName:"Mã loại sản phẩm",sortable:!1,width:160,renderCell:t=>e.jsx(V,{params:t})},{field:"name",headerName:"Loại sản phẩm",flex:1,minWidth:160,hideable:!1,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx($,{params:t})},{field:"createBy",headerName:"Tạo bởi",headerAlign:"center",width:130,editable:!0,align:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"Sửa",onClick:()=>R(t.row.name)}),e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),label:"Xóa",onClick:()=>{y(t.row.id)},sx:{color:"error.main"}})]}],M=()=>c.filter(t=>!U.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(A,{heading:"Danh sách",links:[{name:"Quản trị",href:l.dashboard.root},{name:"Loại sản phẩm",href:l.dashboard.product.root},{name:"Danh sách"}],action:e.jsx(p,{component:B,href:l.dashboard.category.new,variant:"contained",startIcon:e.jsx(d,{icon:"mingcute:add-line"}),children:"Thêm loại sản phẩm"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(P,{disableRowSelectionOnClick:!0,rows:i,columns:c,loading:a,getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{pageSize:100,page:1}}},onRowSelectionModelChange:t=>x(t),columnVisibilityModel:w,onColumnVisibilityModelChange:t=>j(t),slots:{noRowsOverlay:()=>e.jsx(u,{}),noResultsOverlay:()=>e.jsx(u,{title:"No results found"})},slotProps:{panel:{anchorEl:C},toolbar:{setFilterButtonEl:b},columnsManagement:{getTogglableColumns:M}},sx:{[`& .${T.cell}`]:{alignItems:"center",display:"inline-flex"}},hideFooter:!0})})]}),e.jsx(O,{open:o.value,onClose:o.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Bạn chắc chắn muốn xóa ",e.jsxs("strong",{children:[" ",m.length," "]})," sản phẩm?"]}),action:e.jsx(p,{variant:"contained",color:"error",onClick:()=>{D(),o.onFalse()},children:"Xóa"})})]})}const z={title:`Loại sản phẩm | ${F.site.name}`};function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx(q,{})]})}export{ze as default};
