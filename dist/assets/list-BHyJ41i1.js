import{a4 as ua,a5 as ga,b as H,a6 as xa,_ as f,a7 as na,j as e,s as A,a8 as h,B as ba,a9 as T,a as g,u as ra,aa as va,d as q,c as S,e as ia,ab as fa,ac as ma,ad as X,w as W,ae as ya,$ as Q,I as M,af as ha,ag as Ca,Z as ja,T as E,O as Pa,E as ka,U as Z,ah as K,ai as $a,aj as Ia,ak as V,F as D,al as Ra,am as Ba,X as w,D as La,an as za,C as Y,Q as Na,H as Oa,J as Fa}from"./index-CWahQ5ZS.js";import{E as Ma}from"./empty-content-CIXLGBzD.js";import{P as Ta,a as Da}from"./product-skeleton-BxVhrBrv.js";import{F as aa,L as ta}from"./LastPage-C1-szZ7l.js";import{M as Sa}from"./MenuItem-DtpA0HbG.js";import{I as ea}from"./InputAdornment-BL3eVklr.js";import{F as Wa}from"./FormControlLabel-Cfv7DgQP.js";import{C as Ea}from"./Checkbox-CcYt3HFR.js";import{G}from"./Grid2-B_6LUZZb.js";import{L as Aa}from"./Link-OvF8PdYx.js";import"./format-number-jQTf3B9V.js";import"./image-Ds2WO9mA.js";import"./Card-C6GOi25m.js";function Ua(a){return ga("MuiPagination",a)}const _a=ua("MuiPagination",["root","ul","outlined","text"]),wa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Ga(a={}){const{boundaryCount:t=1,componentName:o="usePagination",count:s=1,defaultPage:i=1,disabled:r=!1,hideNextButton:c=!1,hidePrevButton:l=!1,onChange:x,page:j,showFirstButton:$=!1,showLastButton:L=!1,siblingCount:P=1}=a,b=H(a,wa),[u,O]=xa({controlled:j,default:i,name:o,state:"page"}),d=(p,y)=>{j||O(y),x&&x(p,y)},v=(p,y)=>{const _=y-p+1;return Array.from({length:_},(J,n)=>p+n)},I=v(1,Math.min(t,s)),m=v(Math.max(s-t+1,t+1),s),z=Math.max(Math.min(u-P,s-t-P*2-1),t+2),R=Math.min(Math.max(u+P,t+P*2+2),m.length>0?m[0]-2:s-1),F=[...$?["first"]:[],...l?[]:["previous"],...I,...z>t+2?["start-ellipsis"]:t+1<s-t?[t+1]:[],...v(z,R),...R<s-t-1?["end-ellipsis"]:s-t>t?[s-t]:[],...m,...c?[]:["next"],...L?["last"]:[]],N=p=>{switch(p){case"first":return 1;case"previous":return u-1;case"next":return u+1;case"last":return s;default:return null}},k=F.map(p=>typeof p=="number"?{onClick:y=>{d(y,p)},type:"page",page:p,selected:p===u,disabled:r,"aria-current":p===u?"true":void 0}:{onClick:y=>{d(y,N(p))},type:p,page:N(p),selected:!1,disabled:r||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?u>=s:u<=1)});return f({items:k},b)}const oa=na(e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),sa=na(e.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),qa=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],la=(a,t)=>{const{ownerState:o}=a;return[t.root,t[o.variant],t[`size${S(o.size)}`],o.variant==="text"&&t[`text${S(o.color)}`],o.variant==="outlined"&&t[`outlined${S(o.color)}`],o.shape==="rounded"&&t.rounded,o.type==="page"&&t.page,(o.type==="start-ellipsis"||o.type==="end-ellipsis")&&t.ellipsis,(o.type==="previous"||o.type==="next")&&t.previousNext,(o.type==="first"||o.type==="last")&&t.firstLast]},Va=a=>{const{classes:t,color:o,disabled:s,selected:i,size:r,shape:c,type:l,variant:x}=a,j={root:["root",`size${S(r)}`,x,c,o!=="standard"&&`color${S(o)}`,o!=="standard"&&`${x}${S(o)}`,s&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return ia(j,fa,t)},Ha=A("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:la})(({theme:a,ownerState:t})=>f({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${h.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),Qa=A(ba,{name:"MuiPaginationItem",slot:"Root",overridesResolver:la})(({theme:a,ownerState:t})=>f({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${h.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${h.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:T(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${h.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:T(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${h.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:t})=>f({},t.variant==="text"&&{[`&.${h.selected}`]:f({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].contrastText,backgroundColor:(a.vars||a).palette[t.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[t.color].main}},[`&.${h.focusVisible}`]:{backgroundColor:(a.vars||a).palette[t.color].dark}},{[`&.${h.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},t.variant==="outlined"&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${h.selected}`]:f({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:T(a.palette[t.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:T(a.palette[t.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:T(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:T(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${h.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),Ja=A("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,t)=>t.icon})(({theme:a,ownerState:t})=>f({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:a.typography.pxToRem(18)},t.size==="large"&&{fontSize:a.typography.pxToRem(22)})),Xa=g.forwardRef(function(t,o){const s=ra({props:t,name:"MuiPaginationItem"}),{className:i,color:r="standard",component:c,components:l={},disabled:x=!1,page:j,selected:$=!1,shape:L="circular",size:P="medium",slots:b={},type:u="page",variant:O="text"}=s,d=H(s,qa),v=f({},s,{color:r,disabled:x,selected:$,shape:L,size:P,type:u,variant:O}),I=va(),m=Va(v),R=(I?{previous:b.next||l.next||sa,next:b.previous||l.previous||oa,last:b.first||l.first||aa,first:b.last||l.last||ta}:{previous:b.previous||l.previous||oa,next:b.next||l.next||sa,first:b.first||l.first||aa,last:b.last||l.last||ta})[u];return u==="start-ellipsis"||u==="end-ellipsis"?e.jsx(Ha,{ref:o,ownerState:v,className:q(m.root,i),children:"…"}):e.jsxs(Qa,f({ref:o,ownerState:v,component:c,disabled:x,className:q(m.root,i)},d,{children:[u==="page"&&j,R?e.jsx(Ja,{as:R,ownerState:v,className:m.icon}):null]}))}),Za=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Ka=a=>{const{classes:t,variant:o}=a;return ia({root:["root",o],ul:["ul"]},Ua,t)},Ya=A("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:o}=a;return[t.root,t[o.variant]]}})({}),at=A("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function tt(a,t,o){return a==="page"?`${o?"":"Go to "}page ${t}`:`Go to ${a} page`}const et=g.forwardRef(function(t,o){const s=ra({props:t,name:"MuiPagination"}),{boundaryCount:i=1,className:r,color:c="standard",count:l=1,defaultPage:x=1,disabled:j=!1,getItemAriaLabel:$=tt,hideNextButton:L=!1,hidePrevButton:P=!1,renderItem:b=k=>e.jsx(Xa,f({},k)),shape:u="circular",showFirstButton:O=!1,showLastButton:d=!1,siblingCount:v=1,size:I="medium",variant:m="text"}=s,z=H(s,Za),{items:R}=Ga(f({},s,{componentName:"Pagination"})),F=f({},s,{boundaryCount:i,color:c,count:l,defaultPage:x,disabled:j,getItemAriaLabel:$,hideNextButton:L,hidePrevButton:P,renderItem:b,shape:u,showFirstButton:O,showLastButton:d,siblingCount:v,size:I,variant:m}),N=Ka(F);return e.jsx(Ya,f({"aria-label":"pagination navigation",className:q(N.root,r),ownerState:F,ref:o},z,{children:e.jsx(at,{className:N.ul,ownerState:F,children:R.map((k,p)=>e.jsx("li",{children:b(f({},k,{color:c,"aria-label":$(k.type,k.page,k.selected),shape:u,size:I,variant:m}))},p))})}))});function ot(a,t=500){const[o,s]=g.useState(a);return g.useEffect(()=>{const i=setTimeout(()=>{s(a)},t);return()=>{clearTimeout(i)}},[a,t]),o}function st(a){const t=ma(),[o]=g.useState(()=>Array.isArray(a)?a.reduce((i,r)=>({...i,[r]:""}),{}):{[a]:""});return g.useMemo(()=>{const i=Object.keys(o),r=X.cloneDeep(o);return i.forEach(c=>{r[c]=t.get(c)}),X.isEqual(o,r)?o:r},[o,t])}function nt({products:a,loading:t,totalPages:o,onPageChange:s,currentPage:i}){const r=e.jsx(Da,{}),c=a.map((l,x)=>e.jsx(Ta,{product:l},l.id));return e.jsxs(e.Fragment,{children:[e.jsx(W,{display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},sx:{borderLeft:"1px solid rgba(255,255,255,0.2)",borderTop:"1px solid rgba(255,255,255,0.2)"},children:t?r:c}),a.length>0&&e.jsx(et,{color:"primary",size:"large",shape:"rounded",page:i,count:o,onChange:(l,x)=>s(x),sx:{mt:{xs:5,md:8},[`& .${_a.ul}`]:{justifyContent:"center"}}})]})}function rt({sort:a,onSort:t,sortOptions:o}){var r;const s=ya(),i=(r=o.find(c=>c.value===a))==null?void 0:r.label;return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{disableRipple:!0,color:"inherit",onClick:s.onOpen,endIcon:e.jsx(M,{icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sắp xếp:",e.jsx(W,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:i})]}),e.jsx(ha,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsx(Ca,{children:o.map(c=>e.jsx(Sa,{selected:c.value===a,onClick:()=>{s.onClose(),t(c.value)},children:c.label},c.value))})})]})}function it({query:a,onSearch:t,loading:o}){return e.jsx(ja,{fullWidth:!0,sx:{maxWidth:500},autoComplete:"off",value:a,onChange:s=>{t(s.target.value)},size:"small",placeholder:"Tìm kiếm...",InputProps:{startAdornment:e.jsx(ea,{position:"start",children:e.jsx(M,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(ea,{position:"end",children:[o?e.jsx(M,{icon:"svg-spinners:8-dots-rotate"}):null,!o&&a?e.jsx(M,{icon:"lets-icons:close-square-fill",onClick:()=>t(""),sx:{cursor:"pointer"}}):null]})}})}const ca=[{value:"featured",label:"Nổi bật"},{value:"newest",label:"Mới nhất"},{value:"priceDesc",label:"Giá: cao - thấp"},{value:"priceAsc",label:"Giá: thấp - cao"}];function da({options:a,filters:t,title:o,onFilters:s}){const i=g.useCallback((r,c)=>{const l=t.includes(r);console.log(r,c,l,t,[...t,r]),l?s("subCategory",t.filter(x=>x!==r)):s("subCategory",[...t,r])},[s,t]);return e.jsxs(W,{display:"flex",flexDirection:"column",children:[e.jsx(E,{variant:"body1",sx:{mb:1,width:1,backgroundColor:"primary.dark",p:1,fontWeight:600},children:o}),a.map(r=>e.jsx(Wa,{control:e.jsx(Ea,{checked:t.includes(r)}),onChange:(c,l)=>i(r,l),label:r},r))]})}function lt({filters:a,options:t,onFilters:o,onReset:s}){const i=Pa(),r=g.useMemo(()=>!!a.subCategory.length,[a]),c=e.jsxs(e.Fragment,{children:[e.jsxs(W,{display:"flex",alignItems:"center",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(E,{variant:"h6",sx:{flexGrow:1},children:"Bộ lọc"}),e.jsx(ka,{title:"Đặt lại bộ lọc",children:e.jsx(Z,{onClick:s,children:e.jsx(K,{color:"error",variant:"dot",invisible:!r,children:e.jsx(M,{icon:"solar:restart-bold"})})})}),e.jsx(Z,{onClick:i.onFalse,children:e.jsx(M,{icon:"mingcute:close-line"})})]}),e.jsx($a,{sx:{borderStyle:"dashed"}})]});return e.jsxs(e.Fragment,{children:[e.jsx(Q,{disableRipple:!0,color:"inherit",endIcon:e.jsx(K,{color:"error",variant:"dot",invisible:!r,children:e.jsx(M,{icon:"ic:round-filter-list"})}),onClick:i.onTrue,children:"Bộ lọc"}),e.jsxs(Ia,{anchor:"right",open:i.value,onClose:i.onFalse,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:[c,e.jsx(V,{sx:{px:2.5,py:3},children:e.jsx(D,{spacing:3,children:t.category.map(l=>e.jsx(da,{title:l.title,options:l.children||[],filters:a.subCategory,onFilters:o},l.title))})})]})]})}const U={category:"",subCategory:[],sort:ca[0].value};function ct(){const{categoryList:{list:a},categoryCountData:{list:t}}=Ra(),{updateParams:o,updateParam:s}=Ba(w.landing.product.root),[i,r]=g.useState(U.sort),{category:c,subCategory:l,p:x,q:j}=st(["category","subCategory","p","q"]),$=La("up","sm"),[L,P]=g.useState(()=>j||""),b=ot(L,400),[u,O]=g.useState(()=>x?Number(x):1),[d,v]=g.useState(()=>({...U,category:c||"",subCategory:l?l.split(","):[]})),I=g.useCallback((n,B)=>{v(C=>({...C,[n]:B}))},[v]);g.useEffect(()=>{o({...d.category&&{category:d.category.toString()},...d.subCategory.length&&{subCategory:d.subCategory.join(",")}})},[d]);const{data:m,productsLoading:z,productsEmpty:R}=za(20,u-1,b,d.subCategory.length?d.subCategory:[d.category||""],i),F=g.useMemo(()=>{const n=t.filter(C=>C.level===1);return[{id:"all",name:"Tất cả",count:n.reduce((C,pa)=>C+pa.count,0)},...n]},[t]),N=g.useMemo(()=>{const n={category:[{title:"",children:[]}]};if(d.category){const B=a.find(C=>C.name===d.category);B&&(n.category[0].title=B.name,n.category[0].children=B.categories.map(C=>C.name))}else n.category=a.map(B=>({title:B.name,children:B.categories.map(C=>C.name)}));return n},[a,d.category]),k=g.useCallback(n=>{r(n)},[]),p=g.useCallback(n=>{P(n)},[]),y=g.useCallback(n=>{n||d.category?v({...U,category:((n??null)!==null?n:d.category)||""}):v(U)},[d.category]);g.useEffect(()=>{s("q",b)},[b]);const _=e.jsxs(D,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(it,{query:L,onSearch:p,loading:z}),e.jsxs(D,{direction:"row",spacing:1,flexShrink:0,children:[!$&&e.jsx(lt,{options:N,filters:d,onFilters:I,onReset:()=>y()}),e.jsx(rt,{sort:i,onSort:k,sortOptions:ca})]})]}),J=e.jsx(Ma,{filled:!0,sx:{py:10},title:"Sản phẩm đang được cập nhật"});return e.jsxs(e.Fragment,{children:[e.jsx(W,{sx:{backgroundColor:n=>n.palette.background.neutral,py:{xs:3,md:5}},children:e.jsxs(Y,{children:[e.jsx(E,{variant:"h3",sx:{mb:{xs:3,md:5}},children:d.category}),e.jsx(V,{fillContent:!0,children:e.jsx(D,{direction:"row",spacing:3,minWidth:0,maxWidth:1,width:1,children:F.map(n=>e.jsxs(W,{minWidth:"fit-content",children:[e.jsx(dt,{title:n.name,href:n.id==="all"?w.landing.product.root:w.landing.product.category(n.name),onClick:()=>{n.id==="all"?y(""):y(n.name)},active:n.id==="all"&&!c?!0:n.name===c}),e.jsxs(E,{variant:"caption",sx:{},children:[n.count," sản phẩm"]})]},n.id))})})]})}),e.jsx(Y,{sx:{mb:15,mt:3},children:e.jsxs(G,{container:!0,children:[e.jsx(G,{xs:0,sm:4,md:3,sx:{...!$&&{display:"none"}},children:e.jsxs(D,{spacing:3,sx:{pr:2,position:"sticky",top:80,maxHeight:"calc(100vh - var(--layout-header-desktop-height) *1.5)"},children:[e.jsx(V,{fillContent:!0,slotProps:{content:{pl:"8px !important"}},children:N.category.map(n=>e.jsx(da,{title:n.title,options:n.children||[],filters:d.subCategory,onFilters:I},n.title))}),e.jsx(Q,{color:"primary",variant:"soft",onClick:()=>y(),children:"Đặt lại bộ lọc"})]})}),e.jsxs(G,{xs:12,sm:8,md:9,children:[e.jsx(D,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:_}),R&&J,e.jsx(nt,{products:m.products,loading:z,totalPages:m.paginate.pageCount,onPageChange:n=>O(n),currentPage:u})]})]})})]})}function dt({title:a,href:t,onClick:o,active:s}){return e.jsx(Aa,{component:Na,href:t,sx:{textDecoration:"none"},onClick:o,children:e.jsx(E,{variant:"subtitle1",sx:{textTransform:"uppercase",transition:i=>i.transitions.create("textDecoration"),"&:hover":{textDecoration:"underline",color:"primary.main"},...s&&{textDecoration:"underline",color:"primary.main"}},children:a})})}const pt={title:`Product shop - ${Fa.site.name}`};function $t(){return e.jsxs(e.Fragment,{children:[e.jsx(Oa,{children:e.jsxs("title",{children:[" ",pt.title]})}),e.jsx(ct,{})]})}export{$t as default};
