import{p as k,j as r,B as h,d8 as w,h as d,T as c,dl as I,au as L,ad as v,I as o,aX as B,q as j,f as g,t as P,cw as F,aZ as T,r as f,cY as b,w as u,C as $,b3 as E,dA as U,ap as y,H as A,l as D}from"./index-CZQdhxL6.js";import{u as G}from"./use-params-HEgbUP_d.js";import{b as W}from"./blog-BUawXG5v.js";import"./label-VukvCSVc.js";import"./image-BKqVmPzF.js";import{P as S,a as O}from"./post-comment-form-CWgQA8cb.js";import{d as M}from"./format-number-BMTKi65b.js";import{b as H,c as z}from"./post-skeleton-hkUge-qK.js";import{M as N}from"./markdown-BDvZYkzP.js";import{E as _}from"./empty-content-CNoNRi_C.js";import{P as q}from"./Pagination-Bk1AVDVq.js";import{L as R}from"./LoadingButton-CHo-zp-G.js";import{M as V}from"./MenuItem-B-kec-ET.js";import{F as X}from"./FormControlLabel-BkPFkiPo.js";import{C as Y}from"./Checkbox-vPWnpj5r.js";import{A as Z}from"./AvatarGroup-DeclGaCX.js";import"./html-to-markdown-DZkUaXsX.js";import"./form-provider-CgY9D6Kg.js";import"./Rating-CUg9OHpq.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-CDG2HKGW.js";import"./index-SBExoyVP.js";import"./Slider-Cgtky4hB.js";import"./RadioGroup-Cdn6J0S9.js";import"./FormGroup-BHWDss9q.js";import"./index-BlO45MYk.js";import"./countries-DSLisFCy.js";import"./search-not-found-DUPrzHz6.js";import"./ListItemText-Cr03FIqH.js";import"./listItemTextClasses-tNQx_Nyt.js";import"./InputAdornment-FYGjj27N.js";import"./country-select-DInEscmA.js";import"./upload-Cc3l3Jk3.js";import"./preview-multi-file-DA87ns5L.js";import"./file-thumbnail-DwL3Xnqg.js";import"./upload-box-BxodnsWX.js";import"./upload-avatar-B-zuBAMk.js";import"./DatePicker-DnV5-WsQ.js";import"./DialogActions-q6AF7Mz6.js";import"./ListItem-B0RV7hht.js";import"./listItemButtonClasses-DXIYlEZ6.js";import"./dialogTitleClasses-CEl360C-.js";import"./DialogContent-DclWW8HV.js";import"./MobileDateTimePicker-8HOBSqCX.js";import"./Tabs-B1eQZdBL.js";import"./KeyboardArrowRight-CiRDKZM6.js";import"./schema-helper-B-83MGJ7.js";import"./Fab-Bbgn4_zt.js";import"./Zoom-D6xTtgmN.js";import"./Card-BpNMtBWE.js";import"./CardHeader-OkCeJUez.js";import"./Skeleton-hEu7t3F6.js";import"./Link-aHbKcscn.js";import"./LastPage-BXs-7qE5.js";import"./CircularProgress-BNfym32c.js";function C({name:e,avatarUrl:t,message:n,tagUser:a,postedAt:s,hasReply:l}){const i=k();return r.jsxs(h,{sx:{pt:3,display:"flex",position:"relative",...l&&{pl:8}},children:[r.jsx(w,{alt:e,src:t,sx:{mr:2,width:48,height:48}}),r.jsxs(d,{flexGrow:1,sx:{pb:3,borderBottom:p=>`solid 1px ${p.vars.palette.divider}`},children:[r.jsx(c,{variant:"subtitle2",sx:{mb:.5},children:e}),r.jsx(c,{variant:"caption",sx:{color:"text.disabled"},children:I(s)}),r.jsxs(c,{variant:"body2",sx:{mt:1},children:[a&&r.jsxs(h,{component:"strong",sx:{mr:.5},children:["@",a]}),n]}),i.value&&r.jsx(h,{sx:{mt:2},children:r.jsx(L,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment..."})})]}),!l&&r.jsx(v,{size:"small",color:i.value?"primary":"inherit",startIcon:r.jsx(o,{icon:"solar:pen-bold",width:16}),onClick:i.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}function J({comments:e=[]}){return r.jsxs(r.Fragment,{children:[e.map(t=>{const n=!!t.replyComment.length;return r.jsxs(h,{children:[r.jsx(C,{name:t.name,message:t.message,postedAt:t.postedAt,avatarUrl:t.avatarUrl}),n&&t.replyComment.map(a=>{const s=t.users.find(l=>l.id===a.userId);return r.jsx(C,{name:(s==null?void 0:s.name)||"",message:a.message,postedAt:a.postedAt,avatarUrl:(s==null?void 0:s.avatarUrl)||"",tagUser:a.tagUser,hasReply:!0},a.id)})]},t.id)}),r.jsx(q,{count:8,sx:{my:{xs:5,md:8},mx:"auto"}})]})}function K({publish:e,backLink:t,editLink:n,liveLink:a,publishOptions:s,onChangePublish:l,sx:i,...p}){const x=B();return r.jsxs(r.Fragment,{children:[r.jsxs(d,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...i},...p,children:[r.jsx(v,{component:j,href:t,startIcon:r.jsx(o,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),r.jsx(h,{sx:{flexGrow:1}}),e==="published"&&r.jsx(g,{title:"Go Live",children:r.jsx(P,{component:j,href:a,children:r.jsx(o,{icon:"eva:external-link-fill"})})}),r.jsx(g,{title:"Edit",children:r.jsx(P,{component:j,href:n,children:r.jsx(o,{icon:"solar:pen-bold"})})}),r.jsx(R,{color:"inherit",variant:"contained",loading:!e,loadingIndicator:"Loadingâ€¦",endIcon:r.jsx(o,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:e})]}),r.jsx(F,{open:x.open,anchorEl:x.anchorEl,onClose:x.onClose,slotProps:{arrow:{placement:"top-right"}},children:r.jsx(T,{children:s.map(m=>r.jsxs(V,{selected:m.value===e,onClick:()=>{x.onClose(),l(m.value)},children:[m.value==="published"&&r.jsx(o,{icon:"eva:cloud-upload-fill"}),m.value==="draft"&&r.jsx(o,{icon:"solar:file-text-bold"}),m.label]},m.value))})})]})}function Q({post:e,loading:t,error:n}){const[a,s]=f.useState(""),l=f.useCallback(i=>{s(i)},[]);return f.useEffect(()=>{e&&s(e==null?void 0:e.publish)},[e]),t?r.jsx(b,{maxWidth:!1,disablePadding:!0,children:r.jsx(H,{})}):n?r.jsx(b,{maxWidth:!1,children:r.jsx(_,{filled:!0,title:"Post not found!",action:r.jsx(v,{component:j,href:u.dashboard.post.root,startIcon:r.jsx(o,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10,height:"auto",flexGrow:"unset"}})}):r.jsxs(b,{maxWidth:!1,disablePadding:!0,children:[r.jsx($,{maxWidth:!1,sx:{px:{sm:5}},children:r.jsx(K,{backLink:u.dashboard.post.root,editLink:u.dashboard.post.edit(`${e==null?void 0:e.title}`),liveLink:u.post.details(`${e==null?void 0:e.title}`),publish:`${a}`,onChangePublish:l,publishOptions:z})}),r.jsx(S,{title:`${e==null?void 0:e.title}`,coverUrl:`${e==null?void 0:e.coverUrl}`}),r.jsxs(d,{sx:{pb:5,mx:"auto",maxWidth:720,mt:{xs:5,md:10},px:{xs:2,sm:3}},children:[r.jsx(c,{variant:"subtitle1",children:e==null?void 0:e.description}),r.jsx(N,{children:e==null?void 0:e.content}),r.jsxs(d,{spacing:3,sx:{py:3,borderTop:i=>`dashed 1px ${i.vars.palette.divider}`,borderBottom:i=>`dashed 1px ${i.vars.palette.divider}`},children:[r.jsx(d,{direction:"row",flexWrap:"wrap",spacing:1,children:e==null?void 0:e.tags.map(i=>r.jsx(E,{label:i,variant:"soft"},i))}),r.jsxs(d,{direction:"row",alignItems:"center",children:[r.jsx(X,{control:r.jsx(Y,{defaultChecked:!0,size:"small",color:"error",icon:r.jsx(o,{icon:"solar:heart-bold"}),checkedIcon:r.jsx(o,{icon:"solar:heart-bold"}),inputProps:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}),label:M(e==null?void 0:e.totalFavorites),sx:{mr:1}}),r.jsx(Z,{sx:{[`& .${U.avatar}`]:{width:32,height:32}},children:e==null?void 0:e.favoritePerson.map(i=>r.jsx(w,{alt:i.name,src:i.avatarUrl},i.name))})]})]}),r.jsxs(d,{direction:"row",sx:{mb:3,mt:5},children:[r.jsx(c,{variant:"h4",children:"Comments"}),r.jsxs(c,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",e==null?void 0:e.comments.length,")"]})]}),r.jsx(O,{}),r.jsx(y,{sx:{mt:5,mb:2}}),r.jsx(J,{comments:(e==null?void 0:e.comments)??[]})]})]})}const rr={title:`Post details | Dashboard - ${D.site.name}`};function ie(){const{title:e=""}=G(),{post:t,postLoading:n,postError:a}=W(e);return r.jsxs(r.Fragment,{children:[r.jsx(A,{children:r.jsxs("title",{children:[" ",rr.title]})}),r.jsx(Q,{post:t,loading:n,error:a})]})}export{ie as default};
