import{x as tn,y as nn,z as U,D as _,E as on,F as A,G as sn,J as rn,K as Ot,M as an,U as cn,N as L,O as ge,P as R,Q as B,V as Bt,W as ze,X as dn,Y as un,Z as ln,_ as Je,$,a0 as pn,a1 as mn,a2 as fn,a3 as hn,a4 as En,a5 as Se,a6 as me,a7 as xn,a8 as yn,a9 as gn,aa as Sn,ab as In,n as ie,ac as qt,w as D,r as Ie,j as p,h as b,T,q as W,I as z,p as $e,o as wn,t as fe,A as jt}from"./index-u4c5uTy0.js";import{z as I,u as re,F as N,a as ae,t as ce}from"./form-provider-Bg5v_u9U.js";import{u as Ht}from"./use-countdown-6z1J3_i2.js";import{E as vn,P as bn,S as Rn}from"./new-password-icon-2fAP3amv.js";import"./image-I9HL7nG0.js";import"./editor-Dm0D5q3G.js";import{L as de}from"./LoadingButton-B1VX3ihL.js";import{L as M}from"./Link-BJNZ9OZB.js";import{I as he}from"./InputAdornment-e-Ol_iUA.js";const Cn=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:s=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=s.map(c=>`${c.brand}/${c.version}`).join(";");return[t,n,i,o,t,r].filter(c=>c).join(" ")};function Nn(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const Ee={convert(e,{urlSafe:t}={urlSafe:!1}){const n=typeof e=="string"?e:Nn(e),o=tn()(n);return t?o.replace(/\+/g,"-").replace(/\//g,"_"):o}};function Tn(){return nn().getRandomValues(new Uint32Array(1))[0]}function Pn(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let i=0;i<n;i++){const s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((s&15).toString(16))}return o.join("")}class We{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(Tn());return new We(n,t)}toString(){return Pn(this)}}var y;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(y||(y={}));const _n={[y.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[y.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[y.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[y.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[y.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[y.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[y.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[y.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[y.EmptySignInPassword]:{message:"password is required to signIn"},[y.EmptySignInUsername]:{message:"username is required to signIn"},[y.EmptySignUpPassword]:{message:"password is required to signUp"},[y.EmptySignUpUsername]:{message:"username is required to signUp"},[y.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[y.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[y.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[y.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[y.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Qe;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(Qe||(Qe={}));var xe;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(xe||(xe={}));function w(e,t){const{message:n,recoverySuggestion:o}=_n[t];if(!e)throw new U({name:t,message:n,recoverySuggestion:o})}function et(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}var tt;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(tt||(tt={}));var nt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(nt||(nt={}));var ot;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ot||(ot={}));var st;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(st||(st={}));var it;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(it||(it={}));var rt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(rt||(rt={}));var at;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(at||(at={}));var ct;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var dt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(dt||(dt={}));var ut;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ut||(ut={}));var lt;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(lt||(lt={}));var pt;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(pt||(pt={}));var mt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(mt||(mt={}));var ft;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(ft||(ft={}));var ye;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ye||(ye={}));var ht;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(ht||(ht={}));var Et;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Et||(Et={}));var xt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(xt||(xt={}));var yt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(yt||(yt={}));var gt;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(gt||(gt={}));var St;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(St||(St={}));var It;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(It||(It={}));var wt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(wt||(wt={}));var vt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(vt||(vt={}));const An=async e=>{var a,c;const t=(a=e.getConfig().Auth)==null?void 0:a.Cognito;_(t);const n=await e.Auth.getTokens({forceRefresh:!1});on(n);const{"cognito:username":o,sub:i}=((c=n.idToken)==null?void 0:c.payload)??{},s={username:o,userId:i},r=Fn(n);return r&&(s.signInDetails=r),s};function Fn(e){return e==null?void 0:e.signInDetails}const zt=async()=>An(A),q=(e,t)=>sn({category:rn.Auth,action:e,...t}),Un=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return $t();default:return e}};function $t(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const Mn=e=>{let t=e($t(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},K=Mn(Un);function we(e){K.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function H(){K.dispatch({type:"SET_INITIAL_STATE"})}const le={convert(e){return new TextEncoder().encode(e)}};function f(e,t){e!=null&&this.fromString(e,t)}function v(){return new f(null,null)}let j;const Dn=0xdeadbeefcafe,bt=(Dn&16777215)===15715070;function Ln(e,t,n,o,i,s){for(;--s>=0;){const r=t*this[e++]+n[o]+i;i=Math.floor(r/67108864),n[o++]=r&67108863}return i}function On(e,t,n,o,i,s){const r=t&32767,a=t>>15;for(;--s>=0;){let c=this[e]&32767;const d=this[e++]>>15,l=a*c+d*r;c=r*c+((l&32767)<<15)+n[o]+(i&1073741823),i=(c>>>30)+(l>>>15)+a*d+(i>>>30),n[o++]=c&1073741823}return i}function Bn(e,t,n,o,i,s){const r=t&16383,a=t>>14;for(;--s>=0;){let c=this[e]&16383;const d=this[e++]>>14,l=a*c+d*r;c=r*c+((l&16383)<<14)+n[o]+i,i=(c>>28)+(l>>14)+a*d,n[o++]=c&268435455}return i}const Rt=typeof navigator<"u";Rt&&bt&&navigator.appName==="Microsoft Internet Explorer"?(f.prototype.am=On,j=30):Rt&&bt&&navigator.appName!=="Netscape"?(f.prototype.am=Ln,j=26):(f.prototype.am=Bn,j=28);f.prototype.DB=j;f.prototype.DM=(1<<j)-1;f.prototype.DV=1<<j;const Ke=52;f.prototype.FV=Math.pow(2,Ke);f.prototype.F1=Ke-j;f.prototype.F2=2*j-Ke;const qn="0123456789abcdefghijklmnopqrstuvwxyz",ve=[];let V,P;V=48;for(P=0;P<=9;++P)ve[V++]=P;V=97;for(P=10;P<36;++P)ve[V++]=P;V=65;for(P=10;P<36;++P)ve[V++]=P;function Ct(e){return qn.charAt(e)}function jn(e,t){const n=ve[e.charCodeAt(t)];return n??-1}function Hn(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function zn(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function ke(e){const t=v();return t.fromInt(e),t}function $n(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,i=!1,s=0;for(;--o>=0;){const r=jn(e,o);if(r<0){e.charAt(o)==="-"&&(i=!0);continue}i=!1,s===0?this[this.t++]=r:s+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s,this[this.t++]=r>>this.DB-s):this[this.t-1]|=r<<s,s+=n,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&f.ZERO.subTo(this,this)}function Wn(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function Kn(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,i=!1,s="",r=this.t,a=this.DB-r*this.DB%t;if(r-- >0)for(a<this.DB&&(o=this[r]>>a)>0&&(i=!0,s=Ct(o));r>=0;)a<t?(o=(this[r]&(1<<a)-1)<<t-a,o|=this[--r]>>(a+=this.DB-t)):(o=this[r]>>(a-=t)&n,a<=0&&(a+=this.DB,--r)),o>0&&(i=!0),i&&(s+=Ct(o));return i?s:"0"}function kn(){const e=v();return f.ZERO.subTo(this,e),e}function Vn(){return this.s<0?this.negate():this}function Zn(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function Ve(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function Yn(){return this.t<=0?0:this.DB*(this.t-1)+Ve(this[this.t-1]^this.s&this.DM)}function Xn(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function Gn(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Jn(e,t){const n=e%this.DB,o=this.DB-n,i=(1<<o)-1,s=Math.floor(e/this.DB);let r=this.s<<n&this.DM,a;for(a=this.t-1;a>=0;--a)t[a+s+1]=this[a]>>o|r,r=(this[a]&i)<<n;for(a=s-1;a>=0;--a)t[a]=0;t[s]=r,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Qn(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,i=this.DB-o,s=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&s)<<i,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function eo(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function to(e,t){const n=this.abs(),o=e.abs();let i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&f.ZERO.subTo(t,t)}function no(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function oo(e,t,n){const o=e.abs();if(o.t<=0)return;const i=this.abs();if(i.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=v());const s=v(),r=this.s,a=e.s,c=this.DB-Ve(o[o.t-1]);c>0?(o.lShiftTo(c,s),i.lShiftTo(c,n)):(o.copyTo(s),i.copyTo(n));const d=s.t,l=s[d-1];if(l===0)return;const m=l*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),u=this.FV/m,E=(1<<this.F1)/m,h=1<<this.F2;let x=n.t,S=x-d;const g=t===null?v():t;for(s.dlShiftTo(S,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),f.ONE.dlShiftTo(d,g),g.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--S>=0;){let F=n[--x]===l?this.DM:Math.floor(n[x]*u+(n[x-1]+h)*E);if((n[x]+=s.am(0,F,n,S,0,d))<F)for(s.dlShiftTo(S,g),n.subTo(g,n);n[x]<--F;)n.subTo(g,n)}t!==null&&(n.drShiftTo(d,t),r!==a&&f.ZERO.subTo(t,t)),n.t=d,n.clamp(),c>0&&n.rShiftTo(c,n),r<0&&f.ZERO.subTo(n,n)}function so(e){const t=v();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(f.ZERO)>0&&e.subTo(t,t),t}function io(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function ro(e){return this.compareTo(e)===0}function ao(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function co(e){const t=v();return this.addTo(e,t),t}function uo(e){const t=v();return this.subTo(e,t),t}function lo(e){const t=v();return this.multiplyTo(e,t),t}function po(e){const t=v();return this.divRemTo(e,t,null),t}function Z(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function mo(e){const t=v();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(f.ZERO)>0&&this.m.subTo(t,t),t}function fo(e){const t=v();return e.copyTo(t),this.reduce(t),t}function ho(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Eo(e,t){e.squareTo(t),this.reduce(t)}function xo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Z.prototype.convert=mo;Z.prototype.revert=fo;Z.prototype.reduce=ho;Z.prototype.mulTo=xo;Z.prototype.sqrTo=Eo;function yo(e,t,n){let o=e.bitLength(),i,s=ke(1);const r=new Z(t);if(o<=0)return s;o<18?i=1:o<48?i=3:o<144?i=4:o<768?i=5:i=6;const a=[];let c=3;const d=i-1,l=(1<<i)-1;if(a[1]=r.convert(this),i>1){const g=v();for(r.sqrTo(a[1],g);c<=l;)a[c]=v(),r.mulTo(g,a[c-2],a[c]),c+=2}let m=e.t-1,u,E=!0,h=v(),x;for(o=Ve(e[m])-1;m>=0;){for(o>=d?u=e[m]>>o-d&l:(u=(e[m]&(1<<o+1)-1)<<d-o,m>0&&(u|=e[m-1]>>this.DB+o-d)),c=i;!(u&1);)u>>=1,--c;if((o-=c)<0&&(o+=this.DB,--m),E)a[u].copyTo(s),E=!1;else{for(;c>1;)r.sqrTo(s,h),r.sqrTo(h,s),c-=2;c>0?r.sqrTo(s,h):(x=s,s=h,h=x),r.mulTo(h,a[u],s)}for(;m>=0&&!(e[m]&1<<o);)r.sqrTo(s,h),x=s,s=h,h=x,--o<0&&(o=this.DB-1,--m)}const S=r.revert(s);return n(null,S),S}f.prototype.copyTo=Hn;f.prototype.fromInt=zn;f.prototype.fromString=$n;f.prototype.clamp=Wn;f.prototype.dlShiftTo=Xn;f.prototype.drShiftTo=Gn;f.prototype.lShiftTo=Jn;f.prototype.rShiftTo=Qn;f.prototype.subTo=eo;f.prototype.multiplyTo=to;f.prototype.squareTo=no;f.prototype.divRemTo=oo;f.prototype.invDigit=io;f.prototype.addTo=ao;f.prototype.toString=Kn;f.prototype.negate=kn;f.prototype.abs=Vn;f.prototype.compareTo=Zn;f.prototype.bitLength=Yn;f.prototype.mod=so;f.prototype.equals=ro;f.prototype.add=co;f.prototype.subtract=uo;f.prototype.multiply=lo;f.prototype.divide=po;f.prototype.modPow=yo;f.ZERO=ke(0);f.ONE=ke(1);const go=async({a:e,g:t,k:n,x:o,B:i,N:s,U:r})=>new Promise((a,c)=>{t.modPow(o,s,(d,l)=>{if(d){c(d);return}i.subtract(n.multiply(l)).modPow(e.add(r.multiply(o)),s,(m,u)=>{if(m){c(m);return}a(u.mod(s))})})}),So="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",Wt={},De={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Wt[e]=t,De[t]=e}const k=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in De)t[n/2]=De[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t};var oe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Le=function(e,t){return Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},Le(e,t)};function Io(e,t){Le(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Oe=function(){return Oe=Object.assign||function(t){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Oe.apply(this,arguments)};function wo(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n}function vo(e,t,n,o){var i=arguments.length,s=i<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function bo(e,t){return function(n,o){t(n,o,e)}}function Ro(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Co(e,t,n,o){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function a(l){try{d(o.next(l))}catch(m){r(m)}}function c(l){try{d(o.throw(l))}catch(m){r(m)}}function d(l){l.done?s(l.value):i(l.value).then(a,c)}d((o=o.apply(e,t||[])).next())})}function No(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,i,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],i=0}finally{o=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function To(e,t,n,o){o===void 0&&(o=n),e[o]=t[n]}function Po(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Be(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),i,s=[],r;try{for(;(t===void 0||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function _o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kt(arguments[t]));return e}function Ao(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var o=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],r=0,a=s.length;r<a;r++,i++)o[i]=s[r];return o}function se(e){return this instanceof se?(this.v=e,this):new se(e)}function Fo(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i,s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(u){o[u]&&(i[u]=function(E){return new Promise(function(h,x){s.push([u,E,h,x])>1||a(u,E)})})}function a(u,E){try{c(o[u](E))}catch(h){m(s[0][3],h)}}function c(u){u.value instanceof se?Promise.resolve(u.value.v).then(d,l):m(s[0][2],u)}function d(u){a("next",u)}function l(u){a("throw",u)}function m(u,E){u(E),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Uo(e){var t,n;return t={},o("next"),o("throw",function(i){throw i}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(i,s){t[i]=e[i]?function(r){return(n=!n)?{value:se(e[i](r)),done:i==="return"}:s?s(r):r}:s}}function Mo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Be=="function"?Be(e):e[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(s){n[s]=e[s]&&function(r){return new Promise(function(a,c){r=e[s](r),i(a,c,r.done,r.value)})}}function i(s,r,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},r)}}function Do(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Lo(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Oo(e){return e&&e.__esModule?e:{default:e}}function Bo(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function qo(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const jo=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Oe},__asyncDelegator:Uo,__asyncGenerator:Fo,__asyncValues:Mo,__await:se,__awaiter:Co,__classPrivateFieldGet:Bo,__classPrivateFieldSet:qo,__createBinding:To,__decorate:vo,__exportStar:Po,__extends:Io,__generator:No,__importDefault:Oo,__importStar:Lo,__makeTemplateObject:Do,__metadata:Ro,__param:bo,__read:Kt,__rest:wo,__spread:_o,__spreadArrays:Ao,__values:Be},Symbol.toStringTag,{value:"Module"})),kt=Ot(jo);var X={},C={},Nt;function Vt(){return Nt||(Nt=1,Object.defineProperty(C,"__esModule",{value:!0}),C.MAX_HASHABLE_LENGTH=C.INIT=C.KEY=C.DIGEST_LENGTH=C.BLOCK_SIZE=void 0,C.BLOCK_SIZE=64,C.DIGEST_LENGTH=32,C.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),C.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],C.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),C}var G={},Tt;function Ho(){if(Tt)return G;Tt=1,Object.defineProperty(G,"__esModule",{value:!0}),G.RawSha256=void 0;var e=Vt(),t=function(){function n(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(o){if(this.finished)throw new Error("Attempted to update an already finished hash.");var i=0,s=o.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=o[i++],s--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var o=this.bytesHashed*8,i=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(i.setUint8(this.bufferLength++,128),s%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var r=this.bufferLength;r<e.BLOCK_SIZE;r++)i.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(var r=this.bufferLength;r<e.BLOCK_SIZE-8;r++)i.setUint8(r,0);i.setUint32(e.BLOCK_SIZE-8,Math.floor(o/4294967296),!0),i.setUint32(e.BLOCK_SIZE-4,o),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(e.DIGEST_LENGTH),r=0;r<8;r++)a[r*4]=this.state[r]>>>24&255,a[r*4+1]=this.state[r]>>>16&255,a[r*4+2]=this.state[r]>>>8&255,a[r*4+3]=this.state[r]>>>0&255;return a},n.prototype.hashBuffer=function(){for(var o=this,i=o.buffer,s=o.state,r=s[0],a=s[1],c=s[2],d=s[3],l=s[4],m=s[5],u=s[6],E=s[7],h=0;h<e.BLOCK_SIZE;h++){if(h<16)this.temp[h]=(i[h*4]&255)<<24|(i[h*4+1]&255)<<16|(i[h*4+2]&255)<<8|i[h*4+3]&255;else{var x=this.temp[h-2],S=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10;x=this.temp[h-15];var g=(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3;this.temp[h]=(S+this.temp[h-7]|0)+(g+this.temp[h-16]|0)}var F=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&m^~l&u)|0)+(E+(e.KEY[h]+this.temp[h]|0)|0)|0,Y=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&a^r&c^a&c)|0;E=u,u=m,m=l,l=d+F|0,d=c,c=a,a=r,r=F+Y|0}s[0]+=r,s[1]+=a,s[2]+=c,s[3]+=d,s[4]+=l,s[5]+=m,s[6]+=u,s[7]+=E},n}();return G.RawSha256=t,G}var Ue={},J={};const zo=e=>{const t=[];for(let n=0,o=e.length;n<o;n++){const i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,i&63|128);else if(n+1<e.length&&(i&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){const s=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(i>>12|224,i>>6&63|128,i&63|128)}return Uint8Array.from(t)},$o=e=>{let t="";for(let n=0,o=e.length;n<o;n++){const i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){const s=e[++n];t+=String.fromCharCode((i&31)<<6|s&63)}else if(240<=i&&i<365){const r="%"+[i,e[++n],e[++n],e[++n]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(r)}else t+=String.fromCharCode((i&15)<<12|(e[++n]&63)<<6|e[++n]&63)}return t};function Wo(e){return new TextEncoder().encode(e)}function Ko(e){return new TextDecoder("utf-8").decode(e)}const ko=e=>typeof TextEncoder=="function"?Wo(e):zo(e),Vo=e=>typeof TextDecoder=="function"?Ko(e):$o(e),Zo=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:ko,toUtf8:Vo},Symbol.toStringTag,{value:"Module"})),Yo=Ot(Zo);var Pt;function Xo(){if(Pt)return J;Pt=1,Object.defineProperty(J,"__esModule",{value:!0}),J.convertToBuffer=void 0;var e=Yo,t=typeof Buffer<"u"&&Buffer.from?function(o){return Buffer.from(o,"utf8")}:e.fromUtf8;function n(o){return o instanceof Uint8Array?o:typeof o=="string"?t(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}return J.convertToBuffer=n,J}var Q={},_t;function Go(){if(_t)return Q;_t=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return Q.isEmptyData=e,Q}var ee={},At;function Jo(){if(At)return ee;At=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return ee.numToUint8=e,ee}var te={},Ft;function Qo(){if(Ft)return te;Ft=1,Object.defineProperty(te,"__esModule",{value:!0}),te.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var n=new Uint32Array(t.length),o=0;o<t.length;)n[o]=t[o],o+=1;return n}return Uint32Array.from(t)}return te.uint32ArrayFrom=e,te}var Ut;function es(){return Ut||(Ut=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=Xo();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var n=Go();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var o=Jo();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return o.numToUint8}});var i=Qo();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return i.uint32ArrayFrom}})}(Ue)),Ue}var Mt;function ts(){if(Mt)return X;Mt=1,Object.defineProperty(X,"__esModule",{value:!0}),X.Sha256=void 0;var e=kt,t=Vt(),n=Ho(),o=es(),i=function(){function r(a){this.secret=a,this.hash=new n.RawSha256,this.reset()}return r.prototype.update=function(a){if(!((0,o.isEmptyData)(a)||this.error))try{this.hash.update((0,o.convertToBuffer)(a))}catch(c){this.error=c}},r.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},r.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.digestSync()]})})},r.prototype.reset=function(){if(this.hash=new n.RawSha256,this.secret){this.outer=new n.RawSha256;var a=s(this.secret),c=new Uint8Array(t.BLOCK_SIZE);c.set(a);for(var d=0;d<t.BLOCK_SIZE;d++)a[d]^=54,c[d]^=92;this.hash.update(a),this.outer.update(c);for(var d=0;d<a.byteLength;d++)a[d]=0}},r}();X.Sha256=i;function s(r){var a=(0,o.convertToBuffer)(r);if(a.byteLength>t.BLOCK_SIZE){var c=new n.RawSha256;c.update(a),a=c.digest()}var d=new Uint8Array(t.BLOCK_SIZE);return d.set(a),d}return X}(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=kt;t.__exportStar(ts(),e)})(oe);const Ze=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Wt[e[n]];return t},qe=e=>{const t=new oe.Sha256;t.update(e);const n=t.digestSync(),o=Ze(n);return new Array(64-o.length).join("0")+o},pe=e=>qe(k(e)),ns=/^[89a-f]/i,O=e=>{if(!(e instanceof f))throw new Error("Not a BigInteger");const t=e.compareTo(f.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=ns.test(n)?`00${n}`:n,t){const o=n.split("").map(s=>{const r=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new f(o,16).add(f.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},os=({A:e,B:t})=>{const n=new f(pe(O(e)+O(t)),16);if(n.equals(f.ZERO))throw new Error("U cannot be zero.");return n},ss=(e,t,n)=>{const o=new oe.Sha256(t);o.update(e);const i=o.digestSync(),s=new oe.Sha256(i);return s.update(n),s.digestSync().slice(0,16)},Ye=e=>{const t=new We().random(e).toString();return k(t)},is=()=>Ee.convert(Ye(40));class rs{constructor({userPoolName:t,a:n,g:o,A:i,N:s}){this.encoder=le,this.userPoolName=t,this.a=n,this.g=o,this.A=i,this.N=s,this.k=new f(pe(`${O(s)}${O(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new U({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new U({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new U({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=is();const o=`${t}${n}:${this.randomPassword}`,i=qe(o),s=Ze(Ye(16));return this.saltToHashDevices=O(new f(s,16)),new Promise((r,a)=>{this.g.modPow(new f(pe(this.saltToHashDevices+i),16),this.N,(c,d)=>{if(c){a(c);return}this.verifierDevices=O(d),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:i}){if(o.mod(this.N).equals(f.ZERO))throw new Error("B cannot be zero.");const s=os({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,a=qe(r),c=new f(pe(O(i)+a),16),d=await go({a:this.a,g:this.g,k:this.k,x:c,B:o,N:this.N,U:s}),l=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert(""),u=new Uint8Array(l.byteLength+m.byteLength);return u.set(l,0),u.set(m,l.byteLength),ss(k(O(d)),k(O(s)),u)}}const as=async({a:e,g:t,N:n})=>new Promise((o,i)=>{t.modPow(e,n,(s,r)=>{if(s){i(s);return}if(r.mod(n).equals(f.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),be=async e=>{const t=new f(So,16),n=new f("2",16),o=cs(),i=await as({a:o,g:n,N:t});return new rs({userPoolName:e,a:o,g:n,A:i,N:t})},cs=()=>{const e=Ze(Ye(128));return new f(e,16)},ds=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],us=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Zt=()=>{const e=new Date,t=us[e.getUTCDay()],n=ds[e.getUTCMonth()],o=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const a=e.getUTCFullYear();return`${t} ${n} ${o} ${i}:${s}:${r} UTC ${a}`},Yt=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:i})=>{const s=le.convert(e),r=le.convert(t),a=ls(n.SECRET_BLOCK),c=le.convert(o),d=new Uint8Array(s.byteLength+r.byteLength+a.byteLength+c.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(a,s.byteLength+r.byteLength),d.set(c,s.byteLength+r.byteLength+a.byteLength);const l=new oe.Sha256(i);l.update(d);const m=l.digestSync();return Ee.convert(m)},ls=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=an.convert(n),i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i},Dt="userAttributes.";async function ps(e,t,n,o,i){var E,h;const{userPoolClientId:s,userPoolId:r}=o,a={USERNAME:e,PASSWORD:t},c=await i.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const d=L({username:e,userPoolId:r,userPoolClientId:s}),l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:s,UserContextData:d},m=await ge({region:R(r),userAgentValue:q(B.SignIn)},l),u=((E=m.ChallengeParameters)==null?void 0:E.USERNAME)??((h=m.ChallengeParameters)==null?void 0:h.USER_ID_FOR_SRP)??e;return Pe(u),m.ChallengeName==="DEVICE_SRP_AUTH"?Xe({username:u,config:o,clientMetadata:n,session:m.Session,tokenOrchestrator:i}):m}async function ms(e,t,n,o,i){const{userPoolId:s,userPoolClientId:r}=o,a=(s==null?void 0:s.split("_")[1])||"",c=await be(a),d={USERNAME:e,SRP_A:c.A.toString(16)},l=L({username:e,userPoolId:s,userPoolClientId:r}),m={AuthFlow:"USER_SRP_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:l},u=await ge({region:R(s),userAgentValue:q(B.SignIn)},m),{ChallengeParameters:E,Session:h}=u,x=(E==null?void 0:E.USERNAME)??e;return Pe(x),Te(Xt,[t,E,n,h,c,o,i],x,i)}async function fs(e,t,n,o){var u;const{userPoolClientId:i,userPoolId:s}=n,r={USERNAME:e},a=await o.getDeviceMetadata(e);a&&a.deviceKey&&(r.DEVICE_KEY=a.deviceKey);const c=L({username:e,userPoolId:s,userPoolClientId:i}),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:i,UserContextData:c},l=await ge({region:R(s),userAgentValue:q(B.SignIn)},d),m=((u=l.ChallengeParameters)==null?void 0:u.USERNAME)??e;return Pe(m),l.ChallengeName==="DEVICE_SRP_AUTH"?Xe({username:m,config:n,clientMetadata:t,session:l.Session,tokenOrchestrator:o}):l}async function hs(e,t,n,o,i){_(o);const{userPoolId:s,userPoolClientId:r}=o,a=(s==null?void 0:s.split("_")[1])||"",c=await be(a),d={USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},l=L({username:e,userPoolId:s,userPoolClientId:r}),m={AuthFlow:"CUSTOM_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:l},{ChallengeParameters:u,Session:E}=await ge({region:R(s),userAgentValue:q(B.SignIn)},m),h=(u==null?void 0:u.USERNAME)??e;return Pe(h),Te(Xt,[t,u,n,E,c,o,i],h,i)}async function Xe({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:i}){const{userPoolId:s}=t,r=t.userPoolClientId,a=await(i==null?void 0:i.getDeviceMetadata(e));Bt(a);const c=await be(a.deviceGroupKey),d={USERNAME:e,SRP_A:c.A.toString(16),DEVICE_KEY:a.deviceKey},l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:d,ClientMetadata:n,Session:o},{ChallengeParameters:m,Session:u}=await ze({region:R(s)},l);return Es(e,m,n,u,c,t,i)}async function Es(e,t,n,o,i,{userPoolId:s,userPoolClientId:r},a){const c=await(a==null?void 0:a.getDeviceMetadata(e));Bt(c);const d=new f(t==null?void 0:t.SRP_B,16),l=new f(t==null?void 0:t.SALT,16),{deviceKey:m}=c,{deviceGroupKey:u}=c,E=await i.getPasswordAuthenticationKey({username:c.deviceKey,password:c.randomPassword,serverBValue:d,salt:l}),h=Zt(),x={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:h,PASSWORD_CLAIM_SIGNATURE:Yt({username:m,userPoolName:u,challengeParameters:t,dateNow:h,hkdf:E}),DEVICE_KEY:m},S=L({username:e,userPoolId:s,userPoolClientId:r}),g={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:x,Session:o,ClientMetadata:n,UserContextData:S};return ze({region:R(s)},g)}async function Xt(e,t,n,o,i,s,r){const{userPoolId:a,userPoolClientId:c}=s,d=(a==null?void 0:a.split("_")[1])||"",l=new f(t==null?void 0:t.SRP_B,16),m=new f(t==null?void 0:t.SALT,16),u=t==null?void 0:t.USER_ID_FOR_SRP;if(!u)throw new U({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const E=await i.getPasswordAuthenticationKey({username:u,password:e,serverBValue:l,salt:m}),h=Zt(),x={USERNAME:u,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:h,PASSWORD_CLAIM_SIGNATURE:Yt({username:u,userPoolName:d,challengeParameters:t,dateNow:h,hkdf:E})},S=await r.getDeviceMetadata(u);S&&S.deviceKey&&(x.DEVICE_KEY=S.deviceKey);const g=L({username:u,userPoolId:a,userPoolClientId:c}),F={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:x,ClientMetadata:n,Session:o,ClientId:c,UserContextData:g},Y=await ze({region:R(a)},F);return Y.ChallengeName==="DEVICE_SRP_AUTH"?Xe({username:u,config:s,clientMetadata:n,session:Y.Session,tokenOrchestrator:r}):Y}async function Re(e){var i;const{challengeName:t,challengeParameters:n}=e,o=(i=A.getConfig().Auth)==null?void 0:i.Cognito;switch(_(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:s,username:r}=K.getState();if(!Ss(n,"TOTP"))throw new U({name:xe.SignInException,message:`Cannot initiate MFA setup from available types: ${je(He(n.MFAS_CAN_SETUP))}`});const{Session:a,SecretCode:c}=await dn({region:R(o.userPoolId)},{Session:s});return K.dispatch({type:"SET_SIGN_IN_SESSION",value:a}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:xs(c,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:ys(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:je(He(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new U({name:xe.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function xs(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const i=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new un(i)}}}function Ce(e){if(e===ye.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===ye.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function ys(e){return e?JSON.parse(e).map(n=>n.includes(Dt)?n.replace(Dt,""):n):[]}function gs(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function je(e){if(e)return e.map(gs).filter(Boolean)}function He(e){return e?JSON.parse(e):[]}function Ss(e,t){const{MFAS_CAN_SETUP:n}=e,o=je(He(n));return o?o.includes(t):!1}async function Is(){let e;try{e=await zt()}catch{}if(e&&e.userId&&e.username)throw new U({name:cn,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function Ne(e,t,n){if(!t)return;const o=e.split("_")[1]||"",i=await be(o),s=t==null?void 0:t.DeviceKey,r=t==null?void 0:t.DeviceGroupKey;try{await i.generateHashDevice(r??"",s??"")}catch{return}const a={Salt:Ee.convert(k(i.getSaltToHashDevices())),PasswordVerifier:Ee.convert(k(i.getVerifierDevices()))},c=i.getRandomPassword();try{return await ln({region:R(e)},{AccessToken:n,DeviceName:await Cn(),DeviceKey:t==null?void 0:t.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:s,deviceGroupKey:r,randomPassword:c}}catch{return}}async function Te(e,t,n,o){try{return await e(...t)}catch(i){if(i instanceof U&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw i}}function Pe(e){const{dispatch:t}=K;t({type:"SET_USERNAME",value:e})}function _e(e){return K.getState().username??e}async function Ae(e){if(e.AccessToken){const t=Je(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),i=n>0?n-o:0;let s,r,a;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=Je(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(a=e.NewDeviceMetadata);const c={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:a,username:e.username};e!=null&&e.signInDetails&&(c.signInDetails=e.signInDetails),await $.setTokens({tokens:c})}else throw new pn({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const ws="Unable to get user session following successful sign-in.",Fe=async()=>{try{mn.dispatch("auth",{event:"signedIn",data:await zt()},"Auth",fn)}catch(e){throw e.name===hn?new U({name:En,message:ws,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function vs(e){var a;const t=(a=A.getConfig().Auth)==null?void 0:a.Cognito;_(t);const{username:n,password:o,options:i}=e,s={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i==null?void 0:i.clientMetadata;w(!!n,y.EmptySignInUsername),w(!o,y.CustomAuthSignInPassword);try{const{ChallengeName:c,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await Te(fs,[n,r,t,$],n,$),u=_e(n);return we({signInSession:m,username:u,challengeName:c,signInDetails:s}),l?(H(),await Ae({username:u,...l,NewDeviceMetadata:await Ne(t.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:s}),await Fe(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:c,challengeParameters:d})}catch(c){H(),Se(c);const d=Ce(c.name);if(d)return d;throw c}}async function bs(e){var a;const{username:t,password:n,options:o}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=(a=A.getConfig().Auth)==null?void 0:a.Cognito;_(s);const r=o==null?void 0:o.clientMetadata;w(!!t,y.EmptySignInUsername),w(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await hs(t,n,r,s,$),u=_e(t);return we({signInSession:m,username:u,challengeName:c,signInDetails:i}),l?(await Ae({username:u,...l,NewDeviceMetadata:await Ne(s.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:i}),H(),await Fe(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:c,challengeParameters:d})}catch(c){H(),Se(c);const d=Ce(c.name);if(d)return d;throw c}}async function Lt(e){var r,a;const{username:t,password:n}=e,o=(r=A.getConfig().Auth)==null?void 0:r.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};_(o);const s=(a=e.options)==null?void 0:a.clientMetadata;w(!!t,y.EmptySignInUsername),w(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await ms(t,n,s,o,$),u=_e(t);return we({signInSession:m,username:u,challengeName:c,signInDetails:i}),l?(H(),await Ae({username:u,...l,NewDeviceMetadata:await Ne(o.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:i}),await Fe(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:c,challengeParameters:d})}catch(c){H(),Se(c);const d=Ce(c.name);if(d)return d;throw c}}async function Rs(e){var a;const{username:t,password:n,options:o}=e,i=(a=A.getConfig().Auth)==null?void 0:a.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};_(i);const r=o==null?void 0:o.clientMetadata;w(!!t,y.EmptySignInUsername),w(!!n,y.EmptySignInPassword);try{const{ChallengeName:c,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await Te(ps,[t,n,r,i,$],t,$),u=_e(t);return we({signInSession:m,username:u,challengeName:c,signInDetails:s}),l?(await Ae({...l,username:u,NewDeviceMetadata:await Ne(i.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:s}),H(),await Fe(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:c,challengeParameters:d})}catch(c){H(),Se(c);const d=Ce(c.name);if(d)return d;throw c}}async function Cs(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await Is(),t){case"USER_SRP_AUTH":return Lt(e);case"USER_PASSWORD_AUTH":return Rs(e);case"CUSTOM_WITHOUT_SRP":return vs(e);case"CUSTOM_WITH_SRP":return bs(e);default:return Lt(e)}}const Ns=3*60*1e3;function Ts(e){const t=me.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const i=o.data;i!=null&&i.isSignUpComplete&&(me.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),Ge(!1),clearTimeout(n)},Ns)}let Gt=!1,Jt;function Qt(e){Jt=e}function Ps(e){return Jt===e}function ne(){return Gt}function Ge(e){e===!1&&Qt(void 0),Gt=e}function ue(e){return!!e.UserConfirmed}async function _s(e){var E;const{username:t,password:n,options:o}=e,i=(E=A.getConfig().Auth)==null?void 0:E.Cognito,s=(i==null?void 0:i.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:a,autoSignIn:c}=e.options??{};_(i),w(!!t,y.EmptySignUpUsername),w(!!n,y.EmptySignUpPassword);const d=typeof c!="boolean"?c:void 0;d==null||d.authFlowType,(d||c===!0)&&(Qt(t),Ge(!0));const l=await xn({region:R(i.userPoolId),userAgentValue:q(B.SignUp)},{Username:t,Password:n,UserAttributes:(o==null?void 0:o.userAttributes)&&et(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:a&&et(a),ClientId:i.userPoolClientId}),{UserSub:m,CodeDeliveryDetails:u}=l;if(ue(l)&&ne())return{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:m};if(ue(l)&&!ne())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:m};if(!ue(l)&&ne()&&s==="code")Ts();else if(!ue(l)&&ne()&&s==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:u==null?void 0:u.DeliveryMedium,destination:u==null?void 0:u.Destination,attributeName:u==null?void 0:u.AttributeName}},userId:m};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:u==null?void 0:u.DeliveryMedium,destination:u==null?void 0:u.Destination,attributeName:u==null?void 0:u.AttributeName}},userId:m}}async function As(e){var d,l;const{username:t}=e;w(!!t,y.EmptyResetPasswordUsername);const n=(d=A.getConfig().Auth)==null?void 0:d.Cognito;_(n);const{userPoolClientId:o,userPoolId:i}=n,s=(l=e.options)==null?void 0:l.clientMetadata,r=L({username:t,userPoolId:i,userPoolClientId:o}),c=(await yn({region:R(n.userPoolId),userAgentValue:q(B.ResetPassword)},{Username:t,ClientMetadata:s,ClientId:n.userPoolClientId,UserContextData:r})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:c==null?void 0:c.DeliveryMedium,destination:c==null?void 0:c.Destination,attributeName:c==null?void 0:c.AttributeName}}}}async function Fs(e){var d,l;const t=(d=A.getConfig().Auth)==null?void 0:d.Cognito;_(t);const{userPoolClientId:n,userPoolId:o}=t,{username:i,newPassword:s}=e;w(!!i,y.EmptyConfirmResetPasswordUsername),w(!!s,y.EmptyConfirmResetPasswordNewPassword);const r=e.confirmationCode;w(!!r,y.EmptyConfirmResetPasswordConfirmationCode);const a=(l=e.options)==null?void 0:l.clientMetadata,c=L({username:i,userPoolId:o,userPoolClientId:n});await gn({region:R(t.userPoolId),userAgentValue:q(B.ConfirmResetPassword)},{Username:i,ConfirmationCode:r,Password:s,ClientMetadata:a,ClientId:t.userPoolClientId,UserContextData:c})}async function Us(e){var m,u;const{username:t}=e;w(!!t,y.EmptySignUpUsername);const n=(m=A.getConfig().Auth)==null?void 0:m.Cognito;_(n);const{userPoolClientId:o,userPoolId:i}=n,s=(u=e.options)==null?void 0:u.clientMetadata,r=L({username:t,userPoolId:i,userPoolClientId:o}),{CodeDeliveryDetails:a}=await Sn({region:R(n.userPoolId),userAgentValue:q(B.ResendSignUpCode)},{Username:t,ClientMetadata:s,ClientId:n.userPoolClientId,UserContextData:r}),{DeliveryMedium:c,AttributeName:d,Destination:l}={...a};return{destination:l,deliveryMedium:c,attributeName:d||void 0}}async function Ms(e){var d;const{username:t,confirmationCode:n,options:o}=e,i=(d=A.getConfig().Auth)==null?void 0:d.Cognito;_(i);const{userPoolId:s,userPoolClientId:r}=i,a=o==null?void 0:o.clientMetadata;w(!!t,y.EmptyConfirmSignUpUsername),w(!!n,y.EmptyConfirmSignUpCode);const c=L({username:t,userPoolId:s,userPoolClientId:r});return await In({region:R(i.userPoolId),userAgentValue:q(B.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:a,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:c}),new Promise((l,m)=>{try{const u={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!ne()||!Ps(t)){l(u);return}const E=me.listen("auth-internal",({payload:h})=>{switch(h.event){case"autoSignIn":l({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Ge(!1),E()}});me.dispatch("auth-internal",{event:"confirmSignUp",data:u})}catch(u){m(u)}})}const Ds=async({username:e,password:t})=>{await Cs({username:e,password:t})},Ls=async({username:e,password:t,firstName:n,lastName:o})=>{await _s({username:e,password:t,options:{userAttributes:{email:e,given_name:n,family_name:o}}})},Os=async({username:e,confirmationCode:t})=>{await Ms({username:e,confirmationCode:t})},Me=async({username:e})=>{await Us({username:e})},en=async({username:e})=>{await As({username:e})},Bs=async({username:e,confirmationCode:t,newPassword:n})=>{await Fs({username:e,confirmationCode:t,newPassword:n})},qs=I.object({code:I.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Qs(){const e=ie(),n=qt().get("email"),{countdown:o,counting:i,startCountdown:s}=Ht(60),r={code:"",email:n||""},a=re({resolver:ce(qs),defaultValues:r}),{watch:c,handleSubmit:d,formState:{isSubmitting:l}}=a,m=c(),u=d(async S=>{try{await Os({username:S.email,confirmationCode:S.code}),e.push(D.auth.amplify.signIn)}catch(g){console.error(g)}}),E=Ie.useCallback(async()=>{try{s(),await(Me==null?void 0:Me({username:m.email}))}catch(S){console.error(S)}},[s,m.email]),h=p.jsxs(p.Fragment,{children:[p.jsx(vn,{sx:{mx:"auto"}}),p.jsxs(b,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[p.jsx(T,{variant:"h5",children:"Please check your email!"}),p.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:`We've emailed a 6-digit confirmation code. 
Please enter the code in the box below to verify your email.`})]})]}),x=p.jsxs(b,{spacing:3,children:[p.jsx(N.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),p.jsx(N.Code,{name:"code"}),p.jsx(de,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:l,loadingIndicator:"Verify...",children:"Verify"}),p.jsxs(T,{variant:"body2",sx:{mx:"auto"},children:["Don’t have a code? ",p.jsxs(M,{variant:"subtitle2",onClick:E,sx:{cursor:"pointer",...i&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",i&&`(${o}s)`]})]}),p.jsxs(M,{component:W,href:D.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[p.jsx(z,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return p.jsxs(p.Fragment,{children:[h,p.jsx(ae,{methods:a,onSubmit:u,children:x})]})}const js=I.object({email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ei(){const e=ie(),t=$e(),[n,o]=Ie.useState(""),{checkUserSession:i}=wn(),s={email:"",password:""},r=re({resolver:ce(js),defaultValues:s}),{handleSubmit:a,formState:{isSubmitting:c}}=r,d=a(async u=>{try{await Ds({username:u.email,password:u.password}),await(i==null?void 0:i()),e.refresh()}catch(E){console.error(E),o(E instanceof Error?E.message:E)}}),l=p.jsxs(b,{spacing:1.5,sx:{mb:5},children:[p.jsx(T,{variant:"h5",children:"Đăng nhập bằng tài khoản"}),p.jsxs(b,{direction:"row",spacing:.5,children:[p.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Don't have an account?"}),p.jsx(M,{component:W,href:D.auth.amplify.signUp,variant:"subtitle2",children:"Get started"})]})]}),m=p.jsxs(b,{spacing:3,children:[p.jsx(N.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),p.jsxs(b,{spacing:1.5,children:[p.jsx(M,{component:W,href:D.auth.amplify.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),p.jsx(N.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:t.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(he,{position:"end",children:p.jsx(fe,{onClick:t.onToggle,edge:"end",children:p.jsx(z,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),p.jsx(de,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Sign in...",children:"Sign in"})]});return p.jsxs(p.Fragment,{children:[l,!!n&&p.jsx(jt,{severity:"error",sx:{mb:3},children:n}),p.jsx(ae,{methods:r,onSubmit:d,children:m})]})}const Hs=I.object({firstName:I.string().min(1,{message:"First name is required!"}),lastName:I.string().min(1,{message:"Last name is required!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ti(){const[e,t]=Ie.useState(""),n=ie(),o=$e(),i={firstName:"",lastName:"",email:"",password:""},s=re({resolver:ce(Hs),defaultValues:i}),{handleSubmit:r,formState:{isSubmitting:a}}=s,c=r(async u=>{try{await Ls({username:u.email,password:u.password,firstName:u.firstName,lastName:u.lastName});const E=new URLSearchParams({email:u.email}).toString(),h=`${D.auth.amplify.verify}?${E}`;n.push(h)}catch(E){console.error(E),t(E instanceof Error?E.message:E)}}),d=p.jsxs(b,{spacing:1.5,sx:{mb:5},children:[p.jsx(T,{variant:"h5",children:"Get started absolutely free"}),p.jsxs(b,{direction:"row",spacing:.5,children:[p.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Already have an account?"}),p.jsx(M,{component:W,href:D.auth.amplify.signIn,variant:"subtitle2",children:"Sign in"})]})]}),l=p.jsxs(b,{spacing:3,children:[p.jsxs(b,{direction:{xs:"column",sm:"row"},spacing:2,children:[p.jsx(N.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),p.jsx(N.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),p.jsx(N.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),p.jsx(N.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(he,{position:"end",children:p.jsx(fe,{onClick:o.onToggle,edge:"end",children:p.jsx(z,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(de,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Create account...",children:"Create account"})]}),m=p.jsxs(T,{component:"div",sx:{mt:3,textAlign:"center",typography:"caption",color:"text.secondary"},children:["By signing up, I agree to ",p.jsx(M,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",p.jsx(M,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]});return p.jsxs(p.Fragment,{children:[d,!!e&&p.jsx(jt,{severity:"error",sx:{mb:3},children:e}),p.jsx(ae,{methods:s,onSubmit:c,children:l}),m]})}const zs=I.object({email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ni(){const e=ie(),t={email:""},n=re({resolver:ce(zs),defaultValues:t}),{handleSubmit:o,formState:{isSubmitting:i}}=n,s=o(async c=>{try{await en({username:c.email});const d=new URLSearchParams({email:c.email}).toString(),l=`${D.auth.amplify.updatePassword}?${d}`;e.push(l)}catch(d){console.error(d)}}),r=p.jsxs(p.Fragment,{children:[p.jsx(bn,{sx:{mx:"auto"}}),p.jsxs(b,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[p.jsx(T,{variant:"h5",children:"Forgot your password?"}),p.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Please enter the email address associated with your account and we'll email you a link to reset your password."})]})]}),a=p.jsxs(b,{spacing:3,children:[p.jsx(N.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),p.jsx(de,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:i,loadingIndicator:"Send request...",children:"Send request"}),p.jsxs(M,{component:W,href:D.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[p.jsx(z,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return p.jsxs(p.Fragment,{children:[r,p.jsx(ae,{methods:n,onSubmit:s,children:a})]})}const $s=I.object({code:I.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:I.string().min(1,{message:"Confirm password is required!"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function oi(){const e=ie(),n=qt().get("email"),o=$e(),{countdown:i,counting:s,startCountdown:r}=Ht(60),a={code:"",email:n||"",password:"",confirmPassword:""},c=re({resolver:ce($s),defaultValues:a}),{watch:d,handleSubmit:l,formState:{isSubmitting:m}}=c,u=d(),E=l(async g=>{try{await Bs({username:g.email,confirmationCode:g.code,newPassword:g.password}),e.push(D.auth.amplify.signIn)}catch(F){console.error(F)}}),h=Ie.useCallback(async()=>{try{r(),await en({username:u.email})}catch(g){console.error(g)}},[r,u.email]),x=p.jsxs(p.Fragment,{children:[p.jsx(Rn,{sx:{mx:"auto"}}),p.jsxs(b,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[p.jsx(T,{variant:"h5",children:"Request sent successfully!"}),p.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:`We've sent a 6-digit confirmation email to your email. 
Please enter the code in below box to verify your email.`})]})]}),S=p.jsxs(b,{spacing:3,children:[p.jsx(N.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),p.jsx(N.Code,{name:"code"}),p.jsx(N.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(he,{position:"end",children:p.jsx(fe,{onClick:o.onToggle,edge:"end",children:p.jsx(z,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(N.Text,{name:"confirmPassword",label:"Confirm new password",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(he,{position:"end",children:p.jsx(fe,{onClick:o.onToggle,edge:"end",children:p.jsx(z,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(de,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"Update password...",children:"Update password"}),p.jsxs(T,{variant:"body2",sx:{mx:"auto"},children:["Don’t have a code? ",p.jsxs(M,{variant:"subtitle2",onClick:h,sx:{cursor:"pointer",...s&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",s&&`(${i}s)`]})]}),p.jsxs(M,{component:W,href:D.authDemo.split.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[p.jsx(z,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return p.jsxs(p.Fragment,{children:[x,p.jsx(ae,{methods:c,onSubmit:E,children:S})]})}export{ei as A,ti as a,Qs as b,oi as c,ni as d};
