import{bd as fe,be as xe,aF as O,aH as Z,aI as m,r,aK as he,aP as be,aL as q,bw as Ie,dW as Ue,bi as ze,j as t,aM as V,cu as Be,aN as ge,bz as Ne,cP as Ke,f as Pe,e as _e,B as ye,d7 as He,aw as ne,C as je,T as U,h as y,d8 as We,dl as qe,I as G,ax as Ve,aq as Ge,ad as ve,ap as te,cz as Ze,n as Je,p as Qe,cM as Xe,w as Ye,b0 as re,eH as le,b3 as ce,t as ee}from"./index-u4c5uTy0.js";import{z as F,u as Ce,t as De,a as we,F as S}from"./form-provider-Bg5v_u9U.js";import"./image-I9HL7nG0.js";import"./editor-Dm0D5q3G.js";import{s as pe}from"./schema-helper-DPRuLBjQ.js";import{M as et}from"./markdown-dOsybbtG.js";import{E as tt}from"./empty-content-CuZPPhHf.js";import{L as ot}from"./ListItemText-DI6-3wIs.js";import{F as Te}from"./Fab-CdQ8lETw.js";import{Z as st}from"./Zoom-wz-ETbeK.js";import{D as it}from"./dialogTitleClasses-Cq2WiJNn.js";import{D as at}from"./DialogActions-CqCNwb2o.js";import{L as oe}from"./LoadingButton-B1VX3ihL.js";import{F as de}from"./FormControlLabel-ClSICk_D.js";import{C as me}from"./Card-Ro7Utuy1.js";import{C as ue}from"./CardHeader-CNvgM0Ym.js";function nt(e){return xe("MuiSpeedDial",e)}const H=fe("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),rt=["ref"],lt=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],ct=["ref"],pt=e=>{const{classes:o,open:i,direction:a}=e,c={root:["root",`direction${Z(a)}`],fab:["fab"],actions:["actions",!i&&"actionsClosed"]};return ge(c,nt,o)};function I(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}const k=32,W=16,dt=O("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.root,o[`direction${Z(i.direction)}`]]}})(({theme:e,ownerState:o})=>m({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},o.direction==="up"&&{flexDirection:"column-reverse",[`& .${H.actions}`]:{flexDirection:"column-reverse",marginBottom:-k,paddingBottom:W+k}},o.direction==="down"&&{flexDirection:"column",[`& .${H.actions}`]:{flexDirection:"column",marginTop:-k,paddingTop:W+k}},o.direction==="left"&&{flexDirection:"row-reverse",[`& .${H.actions}`]:{flexDirection:"row-reverse",marginRight:-k,paddingRight:W+k}},o.direction==="right"&&{flexDirection:"row",[`& .${H.actions}`]:{flexDirection:"row",marginLeft:-k,paddingLeft:W+k}})),mt=O(Te,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(e,o)=>o.fab})(()=>({pointerEvents:"auto"})),ut=O("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.actions,!i.open&&o.actionsClosed]}})(({ownerState:e})=>m({display:"flex",pointerEvents:"auto"},!e.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),ft=r.forwardRef(function(o,i){const a=he({props:o,name:"MuiSpeedDial"}),c=be(),p={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{ariaLabel:d,FabProps:{ref:f}={},children:j,className:u,direction:D="up",hidden:g=!1,icon:v,onBlur:L,onClose:x,onFocus:w,onKeyDown:A,onMouseEnter:n,onMouseLeave:l,onOpen:b,open:R,TransitionComponent:z=st,transitionDuration:B=p,TransitionProps:Se}=a,N=q(a.FabProps,rt),Fe=q(a,lt),[C,E]=Ie({controlled:R,default:!1,name:"SpeedDial",state:"open"}),K=m({},a,{open:C,direction:D}),P=pt(K),$=Ue(),J=r.useRef(0),Q=r.useRef(),M=r.useRef([]);M.current=[M.current[0]];const Ae=r.useCallback(s=>{M.current[0]=s},[]),ke=ze(f,Ae),Le=(s,h)=>T=>{M.current[s+1]=T,h&&h(T)},Re=s=>{A&&A(s);const h=s.key.replace("Arrow","").toLowerCase(),{current:T=h}=Q;if(s.key==="Escape"){E(!1),M.current[0].focus(),x&&x(s,"escapeKeyDown");return}if(I(h)===I(T)&&I(h)!==void 0){s.preventDefault();const Y=h===T?1:-1,_=Ne(J.current+Y,0,M.current.length-1);M.current[_].focus(),J.current=_,Q.current=T}};r.useEffect(()=>{C||(J.current=0,Q.current=void 0)},[C]);const se=s=>{s.type==="mouseleave"&&l&&l(s),s.type==="blur"&&L&&L(s),$.clear(),s.type==="blur"?$.start(0,()=>{E(!1),x&&x(s,"blur")}):(E(!1),x&&x(s,"mouseLeave"))},Me=s=>{N.onClick&&N.onClick(s),$.clear(),C?(E(!1),x&&x(s,"toggle")):(E(!0),b&&b(s,"toggle"))},ie=s=>{s.type==="mouseenter"&&n&&n(s),s.type==="focus"&&w&&w(s),$.clear(),C||$.start(0,()=>{E(!0),b&&b(s,{focus:"focus",mouseenter:"mouseEnter"}[s.type])})},X=d.replace(/^[^a-z]+|[^\w:.-]+/gi,""),ae=r.Children.toArray(j).filter(s=>r.isValidElement(s)),Ee=ae.map((s,h)=>{const T=s.props,{FabProps:{ref:Y}={},tooltipPlacement:_}=T,Oe=q(T.FabProps,ct),$e=_||(I(D)==="vertical"?"left":"top");return r.cloneElement(s,{FabProps:m({},Oe,{ref:Le(h,Y)}),delay:30*(C?h:ae.length-h),open:C,tooltipPlacement:$e,id:`${X}-action-${h}`})});return t.jsxs(dt,m({className:V(P.root,u),ref:i,role:"presentation",onKeyDown:Re,onBlur:se,onFocus:ie,onMouseEnter:ie,onMouseLeave:se,ownerState:K},Fe,{children:[t.jsx(z,m({in:!g,timeout:B,unmountOnExit:!0},Se,{children:t.jsx(mt,m({color:"primary","aria-label":d,"aria-haspopup":"true","aria-expanded":C,"aria-controls":`${X}-actions`},N,{onClick:Me,className:V(P.fab,N.className),ref:ke,ownerState:K,children:r.isValidElement(v)&&Be(v,["SpeedDialIcon"])?r.cloneElement(v,{open:C}):v}))})),t.jsx(ut,{id:`${X}-actions`,role:"menu","aria-orientation":I(D),className:V(P.actions,!C&&P.actionsClosed),ownerState:K,children:Ee})]}))});function xt(e){return xe("MuiSpeedDialAction",e)}const ht=fe("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),bt=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],gt=e=>{const{open:o,tooltipPlacement:i,classes:a}=e,c={fab:["fab",!o&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Z(i)}`,!o&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ge(c,xt,a)},yt=O(Te,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.fab,!i.open&&o.fabClosed]}})(({theme:e,ownerState:o})=>m({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:Ke(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!o.open&&{opacity:0,transform:"scale(0)"})),jt=O("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.staticTooltip,!i.open&&o.staticTooltipClosed,o[`tooltipPlacement${Z(i.tooltipPlacement)}`]]}})(({theme:e,ownerState:o})=>({position:"relative",display:"flex",alignItems:"center",[`& .${ht.staticTooltipLabel}`]:m({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},!o.open&&{opacity:0,transform:"scale(0.5)"},o.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},o.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),vt=O("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(e,o)=>o.staticTooltipLabel})(({theme:e})=>m({position:"absolute"},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),Ct=r.forwardRef(function(o,i){const a=he({props:o,name:"MuiSpeedDialAction"}),{className:c,delay:p=0,FabProps:d={},icon:f,id:j,open:u,TooltipClasses:D,tooltipOpen:g=!1,tooltipPlacement:v="left",tooltipTitle:L}=a,x=q(a,bt),w=m({},a,{tooltipPlacement:v}),A=gt(w),[n,l]=r.useState(g),b=()=>{l(!1)},R=()=>{l(!0)},z={transitionDelay:`${p}ms`},B=t.jsx(yt,m({size:"small",className:V(A.fab,c),tabIndex:-1,role:"menuitem",ownerState:w},d,{style:m({},z,d.style),children:f}));return g?t.jsxs(jt,m({id:j,ref:i,className:A.staticTooltip,ownerState:w},x,{children:[t.jsx(vt,{style:z,id:`${j}-label`,className:A.staticTooltipLabel,ownerState:w,children:L}),r.cloneElement(B,{"aria-labelledby":`${j}-label`})]})):(!u&&n&&l(!1),t.jsx(Pe,m({id:j,ref:i,title:L,placement:v,onClose:b,onOpen:R,open:u&&n,classes:D},x,{children:B})))});function Dt({title:e,author:o,coverUrl:i,createdAt:a}){const c=be(),p=_e("up","sm");return t.jsx(ye,{sx:{...He({color:`0deg, ${ne(c.vars.palette.grey["900Channel"],.64)}, ${ne(c.vars.palette.grey["900Channel"],.64)}`,imgUrl:i}),height:480,overflow:"hidden"},children:t.jsxs(je,{sx:{height:1,position:"relative"},children:[t.jsx(U,{variant:"h3",component:"h1",sx:{zIndex:9,color:"common.white",position:"absolute",maxWidth:480,pt:{xs:2,md:8}},children:e}),t.jsxs(y,{sx:{left:0,width:1,bottom:0,position:"absolute"},children:[o&&a&&t.jsxs(y,{direction:"row",alignItems:"center",sx:{px:{xs:2,md:3},pb:{xs:3,md:8}},children:[t.jsx(We,{alt:o.name,src:o.avatarUrl,sx:{width:64,height:64,mr:2}}),t.jsx(ot,{sx:{color:"common.white"},primary:o.name,secondary:qe(a),primaryTypographyProps:{typography:"subtitle1",mb:.5},secondaryTypographyProps:{color:"inherit",sx:{opacity:.64}}})]}),t.jsx(ft,{direction:p?"left":"up",ariaLabel:"Share post",icon:t.jsx(G,{icon:"solar:share-bold"}),FabProps:{size:"medium"},sx:{position:"absolute",bottom:{xs:32,md:64},right:{xs:16,md:24}},children:Ve.map(d=>t.jsx(Ct,{icon:t.jsx(Ge,{icon:d.name}),tooltipTitle:d.name,tooltipPlacement:"top",FabProps:{color:"default"}},d.name))})]})]})})}function wt({open:e,title:o,content:i,isValid:a,onClose:c,coverUrl:p,onSubmit:d,description:f,isSubmitting:j}){let u="";p&&(typeof p=="string"?u=p:u=URL.createObjectURL(p));const D=o||u,g=o||f||i||u;return t.jsxs(it,{fullScreen:!0,open:e,onClose:c,children:[t.jsxs(at,{sx:{py:2,px:3},children:[t.jsx(U,{variant:"h6",sx:{flexGrow:1},children:"Preview"}),t.jsx(ve,{variant:"outlined",color:"inherit",onClick:c,children:"Cancel"}),t.jsx(oe,{type:"submit",variant:"contained",disabled:!a,loading:j,onClick:d,children:"Post"})]}),t.jsx(te,{}),g?t.jsxs(Ze,{children:[(D||u)&&t.jsx(Dt,{title:o,coverUrl:u}),t.jsx(je,{sx:{mt:5,mb:10},children:t.jsxs(y,{sx:{mx:"auto",maxWidth:720},children:[t.jsx(U,{variant:"h6",children:f}),t.jsx(et,{children:i})]})})]}):t.jsx(tt,{filled:!0,title:"Empty content!"})]})}const Tt=F.object({title:F.string().min(1,{message:"Title is required!"}),description:F.string().min(1,{message:"Description is required!"}),content:pe.editor().min(100,{message:"Content must be at least 100 characters"}),coverUrl:pe.file({message:{required_error:"Cover is required!"}}),tags:F.string().array().min(2,{message:"Must have at least 2 items!"}),metaKeywords:F.string().array().nonempty({message:"Meta keywords is required!"}),metaTitle:F.string(),metaDescription:F.string()});function _t({currentPost:e}){const o=Je(),i=Qe(),a=r.useMemo(()=>({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",content:(e==null?void 0:e.content)||"",coverUrl:(e==null?void 0:e.coverUrl)||null,tags:(e==null?void 0:e.tags)||[],metaKeywords:(e==null?void 0:e.metaKeywords)||[],metaTitle:(e==null?void 0:e.metaTitle)||"",metaDescription:(e==null?void 0:e.metaDescription)||""}),[e]),c=Ce({mode:"all",resolver:De(Tt),defaultValues:a}),{reset:p,watch:d,setValue:f,handleSubmit:j,formState:{isSubmitting:u,isValid:D}}=c,g=d();r.useEffect(()=>{e&&p(a)},[e,a,p]);const v=j(async n=>{try{await new Promise(l=>setTimeout(l,500)),p(),i.onFalse(),Xe.success(e?"Update success!":"Create success!"),o.push(Ye.dashboard.post.root),console.info("DATA",n)}catch(l){console.error(l)}}),L=r.useCallback(()=>{f("coverUrl",null)},[f]),x=t.jsxs(me,{children:[t.jsx(ue,{title:"Details",subheader:"Title, short description, image...",sx:{mb:3}}),t.jsx(te,{}),t.jsxs(y,{spacing:3,sx:{p:3},children:[t.jsx(S.Text,{name:"title",label:"Post title"}),t.jsx(S.Text,{name:"description",label:"Description",multiline:!0,rows:3}),t.jsxs(y,{spacing:1.5,children:[t.jsx(U,{variant:"subtitle2",children:"Content"}),t.jsx(S.Editor,{name:"content",sx:{maxHeight:480}})]}),t.jsxs(y,{spacing:1.5,children:[t.jsx(U,{variant:"subtitle2",children:"Cover"}),t.jsx(S.Upload,{name:"coverUrl",maxSize:3145728,onDelete:L})]})]})]}),w=t.jsxs(me,{children:[t.jsx(ue,{title:"Properties",subheader:"Additional functions and attributes...",sx:{mb:3}}),t.jsx(te,{}),t.jsxs(y,{spacing:3,sx:{p:3},children:[t.jsx(S.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:le.map(n=>n),getOptionLabel:n=>n,renderOption:(n,l)=>r.createElement("li",{...n,key:l},l),renderTags:(n,l)=>n.map((b,R)=>r.createElement(ce,{...l({index:R}),key:b,label:b,size:"small",color:"info",variant:"soft"}))}),t.jsx(S.Text,{name:"metaTitle",label:"Meta title"}),t.jsx(S.Text,{name:"metaDescription",label:"Meta description",fullWidth:!0,multiline:!0,rows:3}),t.jsx(S.Autocomplete,{name:"metaKeywords",label:"Meta keywords",placeholder:"+ Keywords",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:le.map(n=>n),getOptionLabel:n=>n,renderOption:(n,l)=>r.createElement("li",{...n,key:l},l),renderTags:(n,l)=>n.map((b,R)=>r.createElement(ce,{...l({index:R}),key:b,label:b,size:"small",color:"info",variant:"soft"}))}),t.jsx(de,{control:t.jsx(re,{defaultChecked:!0,inputProps:{id:"comments-switch"}}),label:"Enable comments"})]})]}),A=t.jsxs(ye,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end",children:[t.jsx(de,{control:t.jsx(re,{defaultChecked:!0,inputProps:{id:"publish-switch"}}),label:"Publish",sx:{pl:3,flexGrow:1}}),t.jsxs("div",{children:[t.jsx(ve,{color:"inherit",variant:"outlined",size:"large",onClick:i.onTrue,children:"Preview"}),t.jsx(oe,{type:"submit",variant:"contained",size:"large",loading:u,sx:{ml:2},children:e?"Save changes":"Create post"})]})]});return t.jsxs(we,{methods:c,onSubmit:v,children:[t.jsxs(y,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[x,w,A]}),t.jsx(wt,{isValid:D,onSubmit:v,title:g.title,open:i.value,content:g.content,onClose:i.onFalse,coverUrl:g.coverUrl,isSubmitting:u,description:g.description})]})}const St=F.object({comment:F.string().min(1,{message:"Comment is required!"})});function Ht(){const e={comment:""},o=Ce({resolver:De(St),defaultValues:e}),{reset:i,handleSubmit:a,formState:{isSubmitting:c}}=o,p=a(async d=>{try{await new Promise(f=>setTimeout(f,500)),i(),console.info("DATA",d)}catch(f){console.error(f)}});return t.jsx(we,{methods:o,onSubmit:p,children:t.jsxs(y,{spacing:3,children:[t.jsx(S.Text,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),t.jsxs(y,{direction:"row",alignItems:"center",children:[t.jsxs(y,{direction:"row",alignItems:"center",flexGrow:1,children:[t.jsx(ee,{children:t.jsx(G,{icon:"solar:gallery-add-bold"})}),t.jsx(ee,{children:t.jsx(G,{icon:"eva:attach-2-fill"})}),t.jsx(ee,{children:t.jsx(G,{icon:"eva:smiling-face-fill"})})]}),t.jsx(oe,{type:"submit",variant:"contained",loading:c,children:"Post comment"})]})]})})}export{Dt as P,Ht as a,_t as b};
