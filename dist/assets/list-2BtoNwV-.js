import{j as e,h as v,I as u,aw as M,T as F,B as _,p as $,aX as K,d8 as ne,dl as L,dm as B,t as y,cw as U,aZ as A,ap as G,ad as E,r as h,aV as re,b1 as le,b2 as ie,dM as ce,e9 as de,au as pe,b3 as T,ea as me,aP as he,n as ue,ee as xe,dK as je,cI as be,cM as O,w as f,cY as ge,q as ve,cz as W,ds as N,ef as Ce,f as P,ec as ye,H as fe,l as we}from"./index-CZQdhxL6.js";import{L as q}from"./label-VukvCSVc.js";import{C as J}from"./confirm-dialog-1qdBg838.js";import{C as De}from"./custom-breadcrumbs-Cstz3_WJ.js";import{u as Se,g as Te,r as Pe,T as ke,e as Ie,a as Re}from"./table-pagination-custom-CLUydGY4.js";import{T as Fe}from"./table-no-data-Do4RW2gP.js";import{T as Ae}from"./table-empty-rows-DRvaa4a1.js";import{T as Ee}from"./table-head-custom-6V7ilj5w.js";import{d as Le,a as X}from"./format-number-BMTKi65b.js";import{C as V}from"./CircularProgress-BNfym32c.js";import{b as Be,T as Oe,a as We}from"./TableRow-fVvKj13G.js";import{T as g}from"./TableCell-DpYGOSsU.js";import{C as Y}from"./Checkbox-vPWnpj5r.js";import{L as R}from"./ListItemText-Cr03FIqH.js";import{L as Ne}from"./Link-aHbKcscn.js";import{M as C}from"./MenuItem-B-kec-ET.js";import{D as z}from"./DatePicker-DnV5-WsQ.js";import{I as Ve}from"./InputAdornment-FYGjj27N.js";import{F as ze,a as k,c as I}from"./filters-result-BjhVJUlj.js";import{C as H}from"./Card-BpNMtBWE.js";import{T as He,a as Me}from"./Tabs-B1eQZdBL.js";import"./invoice-details-Cqc1h6my.js";import"./dialogTitleClasses-CEl360C-.js";import"./DialogTitle-0aPq7ynf.js";import"./DialogContent-DclWW8HV.js";import"./DialogActions-q6AF7Mz6.js";import"./TablePagination-BnD_foh1.js";import"./KeyboardArrowRight-CiRDKZM6.js";import"./LastPage-BXs-7qE5.js";import"./FormControlLabel-BkPFkiPo.js";import"./empty-content-CNoNRi_C.js";import"./listItemTextClasses-tNQx_Nyt.js";import"./index-BlO45MYk.js";import"./visuallyHidden-Dan1xhjv.js";import"./ListItem-B0RV7hht.js";import"./listItemButtonClasses-DXIYlEZ6.js";import"./form-provider-CgY9D6Kg.js";import"./Rating-CUg9OHpq.js";import"./editor-CDG2HKGW.js";import"./index-SBExoyVP.js";import"./Slider-Cgtky4hB.js";import"./RadioGroup-Cdn6J0S9.js";import"./FormGroup-BHWDss9q.js";import"./countries-DSLisFCy.js";import"./search-not-found-DUPrzHz6.js";import"./country-select-DInEscmA.js";import"./upload-Cc3l3Jk3.js";import"./preview-multi-file-DA87ns5L.js";import"./file-thumbnail-DwL3Xnqg.js";import"./upload-box-BxodnsWX.js";import"./upload-avatar-B-zuBAMk.js";import"./image-BKqVmPzF.js";import"./MobileDateTimePicker-8HOBSqCX.js";import"./schema-helper-B-83MGJ7.js";import"./address-list-dialog-BmxFezaq.js";import"./LoadingButton-CHo-zp-G.js";function w({title:t,total:p,icon:a,color:c,percent:o,price:x}){return e.jsxs(v,{spacing:2.5,direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:200},children:[e.jsxs(v,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[e.jsx(u,{icon:a,width:32,sx:{color:c,position:"absolute"}}),e.jsx(V,{size:56,thickness:2,value:o,variant:"determinate",sx:{color:c,opacity:.48}}),e.jsx(V,{size:56,value:100,thickness:3,variant:"determinate",sx:{top:0,left:0,opacity:.48,position:"absolute",color:n=>M(n.vars.palette.grey["500Channel"],.16)}})]}),e.jsxs(v,{spacing:.5,children:[e.jsx(F,{variant:"subtitle1",children:t}),e.jsxs(_,{component:"span",sx:{color:"text.disabled",typography:"body2"},children:[Le(p)," invoices"]}),e.jsx(F,{variant:"subtitle2",children:X(x)})]})]})}function _e({row:t,selected:p,onSelectRow:a,onViewRow:c,onEditRow:o,onDeleteRow:x}){const n=$(),d=K();return e.jsxs(e.Fragment,{children:[e.jsxs(Be,{hover:!0,selected:p,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(Y,{checked:p,onClick:a,inputProps:{id:`row-checkbox-${t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(g,{children:e.jsxs(v,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(ne,{alt:t.invoiceTo.name,children:t.invoiceTo.name.charAt(0).toUpperCase()}),e.jsx(R,{disableTypography:!0,primary:e.jsx(F,{variant:"body2",noWrap:!0,children:t.invoiceTo.name}),secondary:e.jsx(Ne,{noWrap:!0,variant:"body2",onClick:c,sx:{color:"text.disabled",cursor:"pointer"},children:t.invoiceNumber})})]})}),e.jsx(g,{children:e.jsx(R,{primary:L(t.createDate),secondary:B(t.createDate),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(g,{children:e.jsx(R,{primary:L(t.dueDate),secondary:B(t.dueDate),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(g,{children:X(t.totalAmount)}),e.jsx(g,{align:"center",children:t.sent}),e.jsx(g,{children:e.jsx(q,{variant:"soft",color:t.status==="paid"&&"success"||t.status==="pending"&&"warning"||t.status==="overdue"&&"error"||"default",children:t.status})}),e.jsx(g,{align:"right",sx:{px:1},children:e.jsx(y,{color:d.open?"inherit":"default",onClick:d.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(U,{open:d.open,anchorEl:d.anchorEl,onClose:d.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(A,{children:[e.jsxs(C,{onClick:()=>{c(),d.onClose()},children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(C,{onClick:()=>{o(),d.onClose()},children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(C,{onClick:()=>{n.onTrue(),d.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(J,{open:n.value,onClose:n.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(E,{variant:"contained",color:"error",onClick:x,children:"Delete"})})]})}function $e({filters:t,options:p,dateError:a,onResetPage:c}){const o=K(),x=h.useCallback(r=>{c(),t.setState({name:r.target.value})},[t,c]),n=h.useCallback(r=>{const i=typeof r.target.value=="string"?r.target.value.split(","):r.target.value;c(),t.setState({service:i})},[t,c]),d=h.useCallback(r=>{c(),t.setState({startDate:r})},[t,c]),l=h.useCallback(r=>{c(),t.setState({endDate:r})},[t,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(v,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(re,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(le,{htmlFor:"invoice-filter-service-select-label",children:"Service"}),e.jsx(ie,{multiple:!0,value:t.state.service,onChange:n,input:e.jsx(ce,{label:"Service"}),renderValue:r=>r.map(i=>i).join(", "),inputProps:{id:"invoice-filter-service-select-label"},sx:{textTransform:"capitalize"},children:p.services.map(r=>e.jsxs(C,{value:r,children:[e.jsx(Y,{disableRipple:!0,size:"small",checked:t.state.service.includes(r)}),r]},r))})]}),e.jsx(z,{label:"Start date",value:t.state.endDate,onChange:d,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(z,{label:"End date",value:t.state.endDate,onChange:l,slotProps:{textField:{fullWidth:!0,error:a,helperText:a?"End date must be later than start date":null}},sx:{maxWidth:{md:180},[`& .${de.root}`]:{bottom:{md:-40},position:{md:"absolute"}}}}),e.jsxs(v,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(pe,{fullWidth:!0,value:t.state.name,onChange:x,placeholder:"Search customer or invoice number...",InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(y,{onClick:o.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(U,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsx(A,{children:e.jsxs(A,{children:[e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})})})]})}function Ke({filters:t,totalResults:p,onResetPage:a,sx:c}){const o=h.useCallback(()=>{a(),t.setState({name:""})},[t,a]),x=h.useCallback(l=>{const r=t.state.service.filter(i=>i!==l);a(),t.setState({service:r})},[t,a]),n=h.useCallback(()=>{a(),t.setState({status:"all"})},[t,a]),d=h.useCallback(()=>{a(),t.setState({startDate:null,endDate:null})},[t,a]);return e.jsxs(ze,{totalResults:p,onReset:t.onResetState,sx:c,children:[e.jsx(k,{label:"Service:",isShow:!!t.state.service.length,children:t.state.service.map(l=>h.createElement(T,{...I,key:l,label:l,onDelete:()=>x(l)}))}),e.jsx(k,{label:"Status:",isShow:t.state.status!=="all",children:e.jsx(T,{...I,label:t.state.status,onDelete:n,sx:{textTransform:"capitalize"}})}),e.jsx(k,{label:"Date:",isShow:!!(t.state.startDate&&t.state.endDate),children:e.jsx(T,{...I,label:me(t.state.startDate,t.state.endDate),onDelete:d})}),e.jsx(k,{label:"Keyword:",isShow:!!t.state.name,children:e.jsx(T,{...I,label:t.state.name,onDelete:o})})]})}const Ue=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}];function Ge(){const t=he(),p=ue(),a=Se({defaultOrderBy:"createDate"}),c=$(),[o,x]=h.useState(xe),n=je({name:"",service:[],status:"all",startDate:null,endDate:null}),d=be(n.state.startDate,n.state.endDate),l=qe({inputData:o,comparator:Te(a.order,a.orderBy),filters:n.state,dateError:d}),r=Pe(l,a.page,a.rowsPerPage),i=!!n.state.name||n.state.service.length>0||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,b=!l.length&&i||!l.length,j=s=>o.filter(m=>m.status===s).length,D=s=>N(o.filter(m=>m.status===s),m=>m.totalAmount),S=s=>j(s)/o.length*100,Z=[{value:"all",label:"All",color:"default",count:o.length},{value:"paid",label:"Paid",color:"success",count:j("paid")},{value:"pending",label:"Pending",color:"warning",count:j("pending")},{value:"overdue",label:"Overdue",color:"error",count:j("overdue")},{value:"draft",label:"Draft",color:"default",count:j("draft")}],Q=h.useCallback(s=>{const m=o.filter(oe=>oe.id!==s);O.success("Delete success!"),x(m),a.onUpdatePageDeleteRow(r.length)},[r.length,a,o]),ee=h.useCallback(()=>{const s=o.filter(m=>!a.selected.includes(m.id));O.success("Delete success!"),x(s),a.onUpdatePageDeleteRows({totalRowsInPage:r.length,totalRowsFiltered:l.length})},[l.length,r.length,a,o]),te=h.useCallback(s=>{p.push(f.dashboard.invoice.edit(s))},[p]),ae=h.useCallback(s=>{p.push(f.dashboard.invoice.details(s))},[p]),se=h.useCallback((s,m)=>{a.onResetPage(),n.setState({status:m})},[n,a]);return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{children:[e.jsx(De,{heading:"List",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Invoice",href:f.dashboard.invoice.root},{name:"List"}],action:e.jsx(E,{component:ve,href:f.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{mb:{xs:3,md:5}},children:e.jsx(W,{sx:{minHeight:108},children:e.jsxs(v,{direction:"row",divider:e.jsx(G,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(w,{title:"Total",total:o.length,percent:100,price:N(o,s=>s.totalAmount),icon:"solar:bill-list-bold-duotone",color:t.vars.palette.info.main}),e.jsx(w,{title:"Paid",total:j("paid"),percent:S("paid"),price:D("paid"),icon:"solar:file-check-bold-duotone",color:t.vars.palette.success.main}),e.jsx(w,{title:"Pending",total:j("pending"),percent:S("pending"),price:D("pending"),icon:"solar:sort-by-time-bold-duotone",color:t.vars.palette.warning.main}),e.jsx(w,{title:"Overdue",total:j("overdue"),percent:S("overdue"),price:D("overdue"),icon:"solar:bell-bing-bold-duotone",color:t.vars.palette.error.main}),e.jsx(w,{title:"Draft",total:j("draft"),percent:S("draft"),price:D("draft"),icon:"solar:file-corrupted-bold-duotone",color:t.vars.palette.text.secondary})]})})}),e.jsxs(H,{children:[e.jsx(He,{value:n.state.status,onChange:se,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${M(t.vars.palette.grey["500Channel"],.08)}`},children:Z.map(s=>e.jsx(Me,{value:s.value,label:s.label,iconPosition:"end",icon:e.jsx(q,{variant:(s.value==="all"||s.value===n.state.status)&&"filled"||"soft",color:s.color,children:s.count})},s.value))}),e.jsx($e,{filters:n,dateError:d,onResetPage:a.onResetPage,options:{services:Ce.map(s=>s.name)}}),i&&e.jsx(Ke,{filters:n,onResetPage:a.onResetPage,totalResults:l.length,sx:{p:2.5,pt:0}}),e.jsxs(_,{sx:{position:"relative"},children:[e.jsx(ke,{dense:a.dense,numSelected:a.selected.length,rowCount:l.length,onSelectAllRows:s=>{a.onSelectAllRows(s,l.map(m=>m.id))},action:e.jsxs(v,{direction:"row",children:[e.jsx(P,{title:"Sent",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"iconamoon:send-fill"})})}),e.jsx(P,{title:"Download",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"eva:download-outline"})})}),e.jsx(P,{title:"Print",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(P,{title:"Delete",children:e.jsx(y,{color:"primary",onClick:c.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(W,{sx:{minHeight:444},children:e.jsxs(Oe,{size:a.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Ee,{order:a.order,orderBy:a.orderBy,headLabel:Ue,rowCount:l.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:s=>a.onSelectAllRows(s,l.map(m=>m.id))}),e.jsxs(We,{children:[l.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map(s=>e.jsx(_e,{row:s,selected:a.selected.includes(s.id),onSelectRow:()=>a.onSelectRow(s.id),onViewRow:()=>ae(s.id),onEditRow:()=>te(s.id),onDeleteRow:()=>Q(s.id)},s.id)),e.jsx(Ae,{height:a.dense?56:76,emptyRows:Ie(a.page,a.rowsPerPage,l.length)}),e.jsx(Fe,{notFound:b})]})]})})]}),e.jsx(Re,{page:a.page,dense:a.dense,count:l.length,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onChangeDense:a.onChangeDense,onRowsPerPageChange:a.onChangeRowsPerPage})]})]}),e.jsx(J,{open:c.value,onClose:c.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{ee(),c.onFalse()},children:"Delete"})})]})}function qe({inputData:t,comparator:p,filters:a,dateError:c}){const{name:o,status:x,service:n,startDate:d,endDate:l}=a,r=t.map((i,b)=>[i,b]);return r.sort((i,b)=>{const j=p(i[0],b[0]);return j!==0?j:i[1]-b[1]}),t=r.map(i=>i[0]),o&&(t=t.filter(i=>i.invoiceNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||i.invoiceTo.name.toLowerCase().indexOf(o.toLowerCase())!==-1)),x!=="all"&&(t=t.filter(i=>i.status===x)),n.length&&(t=t.filter(i=>i.items.some(b=>n.includes(b.service)))),c||d&&l&&(t=t.filter(i=>ye(i.createDate,d,l))),t}const Je={title:`Invoice list | Dashboard - ${we.site.name}`};function Zt(){return e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:e.jsxs("title",{children:[" ",Je.title]})}),e.jsx(Ge,{})]})}export{Zt as default};
