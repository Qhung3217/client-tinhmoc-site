import{j as e,h as x,B as f,ad as T,r as y,cz as S,c as N,T as u,au as v,I as D}from"./index-CZQdhxL6.js";import{z as i,i as L,u as F,t as I,a as k,F as a}from"./form-provider-CgY9D6Kg.js";import"./image-BKqVmPzF.js";import"./editor-CDG2HKGW.js";import{s as b}from"./schema-helper-B-83MGJ7.js";import{D as j}from"./dialogTitleClasses-CEl360C-.js";import{D as $}from"./DialogTitle-0aPq7ynf.js";import{D as q}from"./DialogContent-DclWW8HV.js";import{D as z}from"./DialogActions-q6AF7Mz6.js";import{L as B}from"./LoadingButton-CHo-zp-G.js";import{L as O}from"./label-VukvCSVc.js";import{S as G}from"./search-not-found-DUPrzHz6.js";import{I as H}from"./InputAdornment-FYGjj27N.js";const P=i.object({city:i.string().min(1,{message:"City is required!"}),state:i.string().min(1,{message:"State is required!"}),name:i.string().min(1,{message:"Name is required!"}),address:i.string().min(1,{message:"Address is required!"}),zipCode:i.string().min(1,{message:"Zip code is required!"}),phoneNumber:b.phoneNumber({isValidPhoneNumber:L}),country:b.objectOrNull({message:{required_error:"Country is required!"}}),primary:i.boolean(),addressType:i.string()});function re({open:n,onClose:t,onCreate:o}){const d={name:"",city:"",state:"",address:"",zipCode:"",country:"",primary:!0,phoneNumber:"",addressType:"Home"},m=F({mode:"all",resolver:I(P),defaultValues:d}),{handleSubmit:c,formState:{isSubmitting:h}}=m,l=c(async s=>{try{o({name:s.name,phoneNumber:s.phoneNumber,fullAddress:`${s.address}, ${s.city}, ${s.state}, ${s.country}, ${s.zipCode}`,addressType:s.addressType,primary:s.primary}),t()}catch(p){console.error(p)}});return e.jsx(j,{fullWidth:!0,maxWidth:"sm",open:n,onClose:t,children:e.jsxs(k,{methods:m,onSubmit:l,children:[e.jsx($,{children:"New address"}),e.jsx(q,{dividers:!0,children:e.jsxs(x,{spacing:3,children:[e.jsx(a.RadioGroup,{row:!0,name:"addressType",options:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}]}),e.jsxs(f,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(a.Text,{name:"name",label:"Full name"}),e.jsx(a.Phone,{name:"phoneNumber",label:"Phone number"})]}),e.jsx(a.Text,{name:"address",label:"Address"}),e.jsxs(f,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[e.jsx(a.Text,{name:"city",label:"Town/city"}),e.jsx(a.Text,{name:"state",label:"State"}),e.jsx(a.Text,{name:"zipCode",label:"Zip/code"})]}),e.jsx(a.CountrySelect,{name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(a.Checkbox,{name:"primary",label:"Use this address as default."})]})}),e.jsxs(z,{children:[e.jsx(T,{color:"inherit",variant:"outlined",onClick:t,children:"Cancel"}),e.jsx(B,{type:"submit",variant:"contained",loading:h,children:"Deliver to this address"})]})]})})}function se({list:n,open:t,action:o,onClose:d,selected:m,onSelect:c,title:h="Address book"}){const[l,s]=y.useState(""),p=W({inputData:n,query:l}),g=!p.length&&!!l,C=y.useCallback(r=>{s(r.target.value)},[]),w=y.useCallback(r=>{c(r),s(""),d()},[d,c]),A=e.jsx(S,{sx:{p:.5,maxHeight:480},children:p.map(r=>e.jsxs(N,{onClick:()=>w(r),sx:{py:1,my:.5,px:1.5,gap:.5,width:1,borderRadius:1,display:"flex",flexDirection:"column",alignItems:"flex-start",...m(`${r.id}`)&&{bgcolor:"action.selected"}},children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(u,{variant:"subtitle2",children:r.name}),r.primary&&e.jsx(O,{color:"info",children:"Default"})]}),r.company&&e.jsx(f,{sx:{color:"primary.main",typography:"caption"},children:r.company}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:r.fullAddress}),r.phoneNumber&&e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:r.phoneNumber})]},r.id))});return e.jsxs(j,{fullWidth:!0,maxWidth:"xs",open:t,onClose:d,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[e.jsxs(u,{variant:"h6",children:[" ",h," "]}),o&&o]}),e.jsx(x,{sx:{p:2,pt:0},children:e.jsx(v,{value:l,onChange:C,placeholder:"Search...",InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(D,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),g?e.jsx(G,{query:l,sx:{px:3,pt:5,pb:10}}):A]})}function W({inputData:n,query:t}){return t?n.filter(o=>o.name.toLowerCase().indexOf(t.toLowerCase())!==-1||o.fullAddress.toLowerCase().indexOf(t.toLowerCase())!==-1||`${o.company}`.toLowerCase().indexOf(t.toLowerCase())!==-1):n}export{se as A,re as a};
