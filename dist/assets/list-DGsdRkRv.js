import{j as e,O as I,K as S,aV as L,a as n,aT as B,X as r,aG as G,$ as u,Q as N,I as c,b6 as k,ao as v,H as F,J as O}from"./index-CWahQ5ZS.js";import"./category-new-edit-form-DWIknXjX.js";import{E as h}from"./empty-content-CIXLGBzD.js";import{D as T,d as A,C as H,G as f}from"./confirm-dialog-D8912JMu.js";import{C as V}from"./custom-breadcrumbs-CTZqJBNk.js";import{C as $}from"./Card-C6GOi25m.js";import"./form-provider-CaIsVnSA.js";import"./index-DPBAm0ef.js";import"./FormControlLabel-Cfv7DgQP.js";import"./index-3-9U5rMU.js";import"./MenuItem-DtpA0HbG.js";import"./InputAdornment-BL3eVklr.js";import"./Checkbox-CcYt3HFR.js";import"./format-number-jQTf3B9V.js";import"./image-Ds2WO9mA.js";import"./index-CbZhzOjM.js";import"./CardHeader-DunmSz8L.js";import"./LastPage-C1-szZ7l.js";import"./TableCell-DgfcWENc.js";import"./Link-OvF8PdYx.js";function P({params:a}){return e.jsx("div",{style:{paddingLeft:`${a.row.level*20}px`},children:a.row.id})}function X({params:a}){return e.jsx("div",{style:{paddingLeft:`${a.row.level*20}px`},children:a.row.name})}function _({params:a}){return a.row.createBy.email}function g(a,l=0,i=null){let s=[];return a.forEach(o=>{s.push({...o,level:l,parentId:i,categories:[]}),o.categories&&o.categories.length>0&&(s=s.concat(g(o.categories,l+1,o.id)))}),s}const J={category:!1,id:!1},Q=["category","actions"];function U(){const a=I(),l=S(),{categories:i,categoriesLoading:s,categoiresMutate:o}=L(),[p,x]=n.useState([]),[d,C]=n.useState([]),[b,w]=n.useState(null),[j,y]=n.useState(J);n.useEffect(()=>{if(i.length){const t=g(i);x(t)}},[i]);const D=async t=>{await k(t),o(),v.success("Xóa thành công!")},R=n.useCallback(async()=>{await Promise.all(d.map(t=>B(t.toString())))},[d]),M=n.useCallback(t=>{l.push(r.dashboard.category.edit(t))},[l]),m=[{field:"category",headerName:"Category",filterable:!1},{field:"id",headerName:"Mã loại sản phẩm",sortable:!1,width:160,renderCell:t=>e.jsx(P,{params:t})},{field:"name",headerName:"Loại sản phẩm",flex:1,minWidth:160,hideable:!1,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(X,{params:t})},{field:"createBy",headerName:"Tạo bởi",headerAlign:"center",width:130,editable:!0,align:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(_,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(f,{showInMenu:!0,icon:e.jsx(c,{icon:"solar:pen-bold"}),label:"Sửa",onClick:()=>M(t.row.name)}),e.jsx(f,{showInMenu:!0,icon:e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),label:"Xóa",onClick:()=>{D(t.row.id)},sx:{color:"error.main"}})]}],E=()=>m.filter(t=>!Q.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(V,{heading:"Danh sách",links:[{name:"Quản trị",href:r.dashboard.root},{name:"Loại sản phẩm",href:r.dashboard.product.root},{name:"Danh sách"}],action:e.jsx(u,{component:N,href:r.dashboard.category.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"Thêm loại sản phẩm"}),sx:{mb:{xs:3,md:5}}}),e.jsx($,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(T,{disableRowSelectionOnClick:!0,rows:p,columns:m,loading:s,getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{pageSize:100,page:1}}},onRowSelectionModelChange:t=>C(t),columnVisibilityModel:j,onColumnVisibilityModelChange:t=>y(t),slots:{noRowsOverlay:()=>e.jsx(h,{}),noResultsOverlay:()=>e.jsx(h,{title:"No results found"})},slotProps:{panel:{anchorEl:b},toolbar:{setFilterButtonEl:w},columnsManagement:{getTogglableColumns:E}},sx:{[`& .${A.cell}`]:{alignItems:"center",display:"inline-flex"}},hideFooter:!0})})]}),e.jsx(H,{open:a.value,onClose:a.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Bạn chắc chắn muốn xóa ",e.jsxs("strong",{children:[" ",d.length," "]})," sản phẩm?"]}),action:e.jsx(u,{variant:"contained",color:"error",onClick:()=>{R(),a.onFalse()},children:"Xóa"})})]})}const z={title:`Loại sản phẩm | ${O.site.name}`};function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx(U,{})]})}export{ge as default};
