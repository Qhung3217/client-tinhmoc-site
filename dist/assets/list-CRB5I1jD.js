import{aX as P,j as e,ad as k,I as c,B as d,cw as L,aZ as T,n as F,a$ as R,eD as z,au as G,eE as H,eF as N,r as u,d8 as O,T as B,aP as U,h as I,dl as M,q as E,w as h,dF as w,t as V,dK as $,cY as K,eG as v,H as Q,l as _}from"./index-u4c5uTy0.js";import{u as q}from"./use-debounce-CbUAKCQl.js";import{P as X,a as Y}from"./post-skeleton-Ui8GPPW7.js";import{u as Z,a as D}from"./blog-DRlrCu8Q.js";import{L as A}from"./label-CW2e8lfB.js";import{C as J}from"./custom-breadcrumbs-IydSAGRK.js";import{M as C}from"./MenuItem-CQqSdt0g.js";import{S as ee}from"./search-not-found-B6Ka3ota.js";import{I as se}from"./InputAdornment-e-Ol_iUA.js";import{L as W}from"./Link-BJNZ9OZB.js";import{d as S}from"./format-number-big90whk.js";import{I as te}from"./image-I9HL7nG0.js";import{C as oe}from"./Card-Ro7Utuy1.js";import{P as re,p as ie}from"./Pagination-D0VMOniO.js";import{T as ne,a as ae}from"./Tabs-Cnx4LrgW.js";import"./post-comment-form-C0KYfjsK.js";import"./html-to-markdown-BZygC5Mi.js";import"./Skeleton-YqBi0fMo.js";import"./listItemTextClasses-BH_LSGUS.js";import"./LastPage-Dmj1gKFF.js";import"./KeyboardArrowRight-C4NP_Fdf.js";import"./form-provider-Bg5v_u9U.js";import"./Rating-BhsJb_dJ.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-Dm0D5q3G.js";import"./index-DQGwjOSW.js";import"./Slider-C0weDHva.js";import"./RadioGroup-e83ZoFyH.js";import"./FormGroup-DIodW3BI.js";import"./FormControlLabel-ClSICk_D.js";import"./index-CcA_k5fi.js";import"./countries-DSLisFCy.js";import"./ListItemText-DI6-3wIs.js";import"./country-select-HxnRLHf8.js";import"./Checkbox-BP7c1We-.js";import"./upload-B07M1XN9.js";import"./preview-multi-file-D7tdaa3h.js";import"./file-thumbnail-4Aiz5ZOI.js";import"./upload-box-DLJzHV-X.js";import"./upload-avatar-Ds7bpIeR.js";import"./DatePicker-Dt-kgJxG.js";import"./DialogActions-CqCNwb2o.js";import"./ListItem-sdN4-Rey.js";import"./listItemButtonClasses-BTeIgqK3.js";import"./dialogTitleClasses-Cq2WiJNn.js";import"./DialogContent-BARz1C5J.js";import"./MobileDateTimePicker-BsICTee_.js";import"./schema-helper-DPRuLBjQ.js";import"./markdown-dOsybbtG.js";import"./empty-content-CuZPPhHf.js";import"./Fab-CdQ8lETw.js";import"./Zoom-wz-ETbeK.js";import"./LoadingButton-B1VX3ihL.js";import"./CircularProgress-Ba8n6-eZ.js";import"./CardHeader-CNvgM0Ym.js";function le({sort:s,sortOptions:l,onSort:o}){const i=P();return e.jsxs(e.Fragment,{children:[e.jsxs(k,{disableRipple:!0,color:"inherit",onClick:i.onOpen,endIcon:e.jsx(c,{icon:i.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort by:",e.jsx(d,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(L,{open:i.open,anchorEl:i.anchorEl,onClose:i.onClose,children:e.jsx(T,{children:l.map(t=>e.jsx(C,{selected:s===t.value,onClick:()=>{i.onClose(),o(t.value)},children:t.label},t.value))})})]})}function ce({query:s,results:l,onSearch:o,hrefItem:i,loading:t}){const p=F(),m=n=>{p.push(i(n))},f=n=>{s&&n.key==="Enter"&&m(s)};return e.jsx(R,{sx:{width:{xs:1,sm:260}},loading:t,autoHighlight:!0,popupIcon:null,options:l,onInputChange:(n,r)=>o(r),getOptionLabel:n=>n.title,noOptionsText:e.jsx(ee,{query:s}),isOptionEqualToValue:(n,r)=>n.id===r.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${z.option}`]:{pl:.75}}}},renderInput:n=>e.jsx(G,{...n,placeholder:"Search...",onKeyUp:f,InputProps:{...n.InputProps,startAdornment:e.jsx(se,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[t?e.jsx(c,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,n.InputProps.endAdornment]})}}),renderOption:(n,r,{inputValue:x})=>{const j=H(r.title,x),g=N(r.title,j);return u.createElement("li",{...n,key:r.id},e.jsx(O,{alt:r.title,src:r.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},r.id),e.jsx(W,{underline:"none",onClick:()=>m(r.title),children:g.map((b,a)=>e.jsx(B,{component:"span",color:b.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:b.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:b.text},a))},x))}})}function de({post:s}){const l=U(),o=P(),i=F(),{title:t,author:p,publish:m,coverUrl:f,createdAt:n,totalViews:r,totalShares:x,totalComments:j,description:g}=s;return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{sx:{display:"flex"},children:[e.jsxs(I,{spacing:1,sx:{p:l.spacing(3,3,2,3)},children:[e.jsxs(d,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(A,{variant:"soft",color:m==="published"&&"info"||"default",children:m}),e.jsx(d,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:M(n)})]}),e.jsxs(I,{spacing:1,flexGrow:1,children:[e.jsx(W,{component:E,href:h.dashboard.post.details(t),color:"inherit",variant:"subtitle2",sx:{...w({line:2})},children:t}),e.jsx(B,{variant:"body2",sx:{...w({line:2}),color:"text.secondary"},children:g})]}),e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx(V,{color:o.open?"inherit":"default",onClick:o.onOpen,children:e.jsx(c,{icon:"eva:more-horizontal-fill"})}),e.jsxs(d,{gap:1.5,flexGrow:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[e.jsxs(d,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"eva:message-circle-fill",width:16}),S(j)]}),e.jsxs(d,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"solar:eye-bold",width:16}),S(r)]}),e.jsxs(d,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"solar:share-bold",width:16}),S(x)]})]})]})]}),e.jsxs(d,{sx:{p:1,width:180,height:240,flexShrink:0,position:"relative",display:{xs:"none",sm:"block"}},children:[e.jsx(O,{alt:p.name,src:p.avatarUrl,sx:{top:16,right:16,zIndex:9,position:"absolute"}}),e.jsx(te,{alt:t,src:f,sx:{height:1,borderRadius:1.5}})]})]}),e.jsx(L,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"bottom-center"}},children:e.jsxs(T,{children:[e.jsxs(C,{onClick:()=>{o.onClose(),i.push(h.dashboard.post.details(t))},children:[e.jsx(c,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(C,{onClick:()=>{o.onClose(),i.push(h.dashboard.post.edit(t))},children:[e.jsx(c,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(C,{onClick:()=>{o.onClose()},sx:{color:"error.main"},children:[e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})})]})}function pe({posts:s,loading:l}){const o=e.jsx(X,{variant:"horizontal"}),i=s.map(t=>e.jsx(de,{post:t},t.id));return e.jsxs(e.Fragment,{children:[e.jsx(d,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:l?o:i}),s.length>8&&e.jsx(re,{count:8,sx:{mt:{xs:5,md:8},[`& .${ie.ul}`]:{justifyContent:"center"}}})]})}function me(){const[s,l]=u.useState("latest"),[o,i]=u.useState(""),t=q(o),{posts:p,postsLoading:m}=Z(),{searchResults:f,searchLoading:n}=D(t),r=$({publish:"all"}),x=he({inputData:p,filters:r.state,sortBy:s}),j=u.useCallback(a=>{l(a)},[]),g=u.useCallback(a=>{i(a)},[]),b=u.useCallback((a,y)=>{r.setState({publish:y})},[r]);return e.jsxs(K,{children:[e.jsx(J,{heading:"List",links:[{name:"Dashboard",href:h.dashboard.root},{name:"Blog",href:h.dashboard.post.root},{name:"List"}],action:e.jsx(k,{component:E,href:h.dashboard.post.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"New post"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(I,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(ce,{query:t,results:f,onSearch:g,loading:n,hrefItem:a=>h.dashboard.post.details(a)}),e.jsx(le,{sort:s,onSort:j,sortOptions:Y})]}),e.jsx(ne,{value:r.state.publish,onChange:b,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(a=>e.jsx(ae,{iconPosition:"end",value:a,label:a,icon:e.jsxs(A,{variant:(a==="all"||a===r.state.publish)&&"filled"||"soft",color:a==="published"&&"info"||"default",children:[a==="all"&&p.length,a==="published"&&p.filter(y=>y.publish==="published").length,a==="draft"&&p.filter(y=>y.publish==="draft").length]}),sx:{textTransform:"capitalize"}},a))}),e.jsx(pe,{posts:x,loading:m})]})}const he=({inputData:s,filters:l,sortBy:o})=>{const{publish:i}=l;return o==="latest"&&(s=v(s,["createdAt"],["desc"])),o==="oldest"&&(s=v(s,["createdAt"],["asc"])),o==="popular"&&(s=v(s,["totalViews"],["desc"])),i!=="all"&&(s=s.filter(t=>t.publish===i)),s},xe={title:`Post list | Dashboard - ${_.site.name}`};function fs(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsxs("title",{children:[" ",xe.title]})}),e.jsx(me,{})]})}export{fs as default};
