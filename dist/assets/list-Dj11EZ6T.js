import{j as e,p as E,n as I,dP as S,r,dN as L,w as l,cY as N,ad as p,q as B,I as d,e4 as G,cM as k,H as v,l as F}from"./index-u4c5uTy0.js";import"./category-new-edit-form-CjMi8C61.js";import{E as u}from"./empty-content-CuZPPhHf.js";import{C as O}from"./confirm-dialog-BRBREL0G.js";import{C as A}from"./custom-breadcrumbs-IydSAGRK.js";import{C as H}from"./Card-Ro7Utuy1.js";import{D as P,g as T,G as h}from"./DataGrid-B_VbSwgQ.js";import"./form-provider-Bg5v_u9U.js";import"./Rating-BhsJb_dJ.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-Dm0D5q3G.js";import"./index-DQGwjOSW.js";import"./Slider-C0weDHva.js";import"./RadioGroup-e83ZoFyH.js";import"./FormGroup-DIodW3BI.js";import"./FormControlLabel-ClSICk_D.js";import"./index-CcA_k5fi.js";import"./countries-DSLisFCy.js";import"./search-not-found-B6Ka3ota.js";import"./MenuItem-CQqSdt0g.js";import"./listItemTextClasses-BH_LSGUS.js";import"./ListItemText-DI6-3wIs.js";import"./InputAdornment-e-Ol_iUA.js";import"./country-select-HxnRLHf8.js";import"./Checkbox-BP7c1We-.js";import"./upload-B07M1XN9.js";import"./preview-multi-file-D7tdaa3h.js";import"./format-number-big90whk.js";import"./file-thumbnail-4Aiz5ZOI.js";import"./upload-box-DLJzHV-X.js";import"./upload-avatar-Ds7bpIeR.js";import"./image-I9HL7nG0.js";import"./DatePicker-Dt-kgJxG.js";import"./DialogActions-CqCNwb2o.js";import"./ListItem-sdN4-Rey.js";import"./listItemButtonClasses-BTeIgqK3.js";import"./dialogTitleClasses-Cq2WiJNn.js";import"./DialogContent-BARz1C5J.js";import"./MobileDateTimePicker-BsICTee_.js";import"./Tabs-Cnx4LrgW.js";import"./KeyboardArrowRight-C4NP_Fdf.js";import"./index-CxQHrayw.js";import"./CardHeader-CNvgM0Ym.js";import"./LoadingButton-B1VX3ihL.js";import"./CircularProgress-Ba8n6-eZ.js";import"./DialogTitle-BLfIj25N.js";import"./Link-BJNZ9OZB.js";import"./ListItemIcon-BF4v8ClL.js";import"./ClickAwayListener-DyIoSbg1.js";import"./Skeleton-YqBi0fMo.js";import"./TablePagination-CrI79E3J.js";import"./LastPage-Dmj1gKFF.js";import"./TableCell-D3_p3tAp.js";function V({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.id})}function $({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.name})}function X({params:o}){return o.row.createBy.email}function f(o,n=0,s=null){let a=[];return o.forEach(i=>{a.push({...i,level:n,parentId:s,categories:[]}),i.categories&&i.categories.length>0&&(a=a.concat(f(i.categories,n+1,i.id)))}),a}const _={category:!1,id:!1},U=["category","actions"];function q(){const o=E(),n=I(),{categories:s,categoriesLoading:a}=S(),[i,g]=r.useState([]),[m,x]=r.useState([]),[C,b]=r.useState(null),[w,j]=r.useState(_);r.useEffect(()=>{if(s.length){const t=f(s);g(t)}},[s]);const y=async t=>{await G(t),k.success("Xóa thành công!")},D=r.useCallback(async()=>{await Promise.all(m.map(t=>L(t.toString())))},[m]),R=r.useCallback(t=>{n.push(l.dashboard.category.edit(t))},[n]),c=[{field:"category",headerName:"Category",filterable:!1},{field:"id",headerName:"Mã loại sản phẩm",sortable:!1,width:160,renderCell:t=>e.jsx(V,{params:t})},{field:"name",headerName:"Loại sản phẩm",flex:1,minWidth:160,hideable:!1,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx($,{params:t})},{field:"createBy",headerName:"Tạo bởi",headerAlign:"center",width:130,editable:!0,align:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"Sửa",onClick:()=>R(t.row.name)}),e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),label:"Xóa",onClick:()=>{y(t.row.id)},sx:{color:"error.main"}})]}],M=()=>c.filter(t=>!U.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(A,{heading:"Danh sách",links:[{name:"Quản trị",href:l.dashboard.root},{name:"Loại sản phẩm",href:l.dashboard.product.root},{name:"Danh sách"}],action:e.jsx(p,{component:B,href:l.dashboard.category.new,variant:"contained",startIcon:e.jsx(d,{icon:"mingcute:add-line"}),children:"Thêm loại sản phẩm"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(P,{disableRowSelectionOnClick:!0,rows:i,columns:c,loading:a,getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{pageSize:100,page:1}}},onRowSelectionModelChange:t=>x(t),columnVisibilityModel:w,onColumnVisibilityModelChange:t=>j(t),slots:{noRowsOverlay:()=>e.jsx(u,{}),noResultsOverlay:()=>e.jsx(u,{title:"No results found"})},slotProps:{panel:{anchorEl:C},toolbar:{setFilterButtonEl:b},columnsManagement:{getTogglableColumns:M}},sx:{[`& .${T.cell}`]:{alignItems:"center",display:"inline-flex"}},hideFooter:!0})})]}),e.jsx(O,{open:o.value,onClose:o.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Bạn chắc chắn muốn xóa ",e.jsxs("strong",{children:[" ",m.length," "]})," sản phẩm?"]}),action:e.jsx(p,{variant:"contained",color:"error",onClick:()=>{D(),o.onFalse()},children:"Xóa"})})]})}const z={title:`Loại sản phẩm | ${F.site.name}`};function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx(q,{})]})}export{ze as default};
