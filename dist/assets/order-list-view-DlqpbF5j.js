import{p as S,aX as L,j as e,h as b,d8 as P,B as w,dl as M,dm as $,t as f,I as x,e8 as K,c0 as V,cw as O,aZ as B,ad as E,r as h,e9 as Q,au as q,b3 as y,ea as G,n as J,eb as X,dK as Y,cI as Z,cM as k,w as v,cY as ee,aw as te,f as se,cz as ae,ec as oe,ed as ne}from"./index-CZQdhxL6.js";import{L as N}from"./label-VukvCSVc.js";import{C as W}from"./confirm-dialog-1qdBg838.js";import{C as re}from"./custom-breadcrumbs-Cstz3_WJ.js";import{u as le,g as ie,r as ce,T as de,e as he,a as me}from"./table-pagination-custom-CLUydGY4.js";import{T as ue}from"./table-no-data-Do4RW2gP.js";import{T as xe}from"./table-empty-rows-DRvaa4a1.js";import{T as pe}from"./table-head-custom-6V7ilj5w.js";import{a as R}from"./format-number-BMTKi65b.js";import{b as A,T as ge,a as je}from"./TableRow-fVvKj13G.js";import{T as g}from"./TableCell-DpYGOSsU.js";import{C as be}from"./Checkbox-vPWnpj5r.js";import{L as Ce}from"./Link-aHbKcscn.js";import{L as I}from"./ListItemText-Cr03FIqH.js";import{M as C}from"./MenuItem-B-kec-ET.js";import{D as F}from"./DatePicker-DnV5-WsQ.js";import{I as we}from"./InputAdornment-FYGjj27N.js";import{F as fe,a as D,c as T}from"./filters-result-BjhVJUlj.js";import{C as ye}from"./Card-BpNMtBWE.js";import{T as ve,a as De}from"./Tabs-B1eQZdBL.js";function Te({row:t,selected:i,onViewRow:n,onSelectRow:r,onDeleteRow:m}){const o=S(),c=S(),s=L(),p=e.jsxs(A,{hover:!0,selected:i,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(be,{checked:i,onClick:r,inputProps:{id:`row-checkbox-${t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(g,{children:e.jsx(Ce,{color:"inherit",onClick:n,underline:"always",sx:{cursor:"pointer"},children:t.orderNumber})}),e.jsx(g,{children:e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(P,{alt:t.customer.name,src:t.customer.avatarUrl}),e.jsxs(b,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(w,{component:"span",children:t.customer.name}),e.jsx(w,{component:"span",sx:{color:"text.disabled"},children:t.customer.email})]})]})}),e.jsx(g,{children:e.jsx(I,{primary:M(t.createdAt),secondary:$(t.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(g,{align:"center",children:[" ",t.totalQuantity," "]}),e.jsxs(g,{children:[" ",R(t.subtotal)," "]}),e.jsx(g,{children:e.jsx(N,{variant:"soft",color:t.status==="completed"&&"success"||t.status==="pending"&&"warning"||t.status==="cancelled"&&"error"||"default",children:t.status})}),e.jsxs(g,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(f,{color:c.value?"inherit":"default",onClick:c.onToggle,sx:{...c.value&&{bgcolor:"action.hover"}},children:e.jsx(x,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(f,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})]}),l=e.jsx(A,{children:e.jsx(g,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(K,{in:c.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(V,{sx:{m:1.5},children:t.items.map(d=>e.jsxs(b,{direction:"row",alignItems:"center",sx:{p:j=>j.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:j=>`solid 2px ${j.vars.palette.background.neutral}`}},children:[e.jsx(P,{src:d.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(I,{primary:d.name,secondary:d.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs("div",{children:["x",d.quantity," "]}),e.jsx(w,{sx:{width:110,textAlign:"right"},children:R(d.price)})]},d.id))})})})});return e.jsxs(e.Fragment,{children:[p,l,e.jsx(O,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(C,{onClick:()=>{o.onTrue(),s.onClose()},sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(C,{onClick:()=>{n(),s.onClose()},children:[e.jsx(x,{icon:"solar:eye-bold"}),"View"]})]})}),e.jsx(W,{open:o.value,onClose:o.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(E,{variant:"contained",color:"error",onClick:m,children:"Delete"})})]})}function Se({filters:t,onResetPage:i,dateError:n}){const r=L(),m=h.useCallback(s=>{i(),t.setState({name:s.target.value})},[t,i]),o=h.useCallback(s=>{i(),t.setState({startDate:s})},[t,i]),c=h.useCallback(s=>{i(),t.setState({endDate:s})},[t,i]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(F,{label:"Start date",value:t.state.startDate,onChange:o,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(F,{label:"End date",value:t.state.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:n,helperText:n?"End date must be later than start date":null}},sx:{maxWidth:{md:200},[`& .${Q.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(q,{fullWidth:!0,value:t.state.name,onChange:m,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(we,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(f,{onClick:r.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(O,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(C,{onClick:()=>{r.onClose()},children:[e.jsx(x,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{r.onClose()},children:[e.jsx(x,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{r.onClose()},children:[e.jsx(x,{icon:"solar:export-bold"}),"Export"]})]})})]})}function Pe({filters:t,totalResults:i,onResetPage:n,sx:r}){const m=h.useCallback(()=>{n(),t.setState({name:""})},[t,n]),o=h.useCallback(()=>{n(),t.setState({status:"all"})},[t,n]),c=h.useCallback(()=>{n(),t.setState({startDate:null,endDate:null})},[t,n]),s=h.useCallback(()=>{n(),t.onResetState()},[t,n]);return e.jsxs(fe,{totalResults:i,onReset:s,sx:r,children:[e.jsx(D,{label:"Status:",isShow:t.state.status!=="all",children:e.jsx(y,{...T,label:t.state.status,onDelete:o,sx:{textTransform:"capitalize"}})}),e.jsx(D,{label:"Date:",isShow:!!(t.state.startDate&&t.state.endDate),children:e.jsx(y,{...T,label:G(t.state.startDate,t.state.endDate),onDelete:c})}),e.jsx(D,{label:"Keyword:",isShow:!!t.state.name,children:e.jsx(y,{...T,label:t.state.name,onDelete:m})})]})}const ke=[{value:"all",label:"All"},...ne],Re=[{id:"orderNumber",label:"Order",width:88},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}];function Xe(){const t=le({defaultOrderBy:"orderNumber"}),i=J(),n=S(),[r,m]=h.useState(X),o=Y({name:"",status:"all",startDate:null,endDate:null}),c=Z(o.state.startDate,o.state.endDate),s=Ae({inputData:r,comparator:ie(t.order,t.orderBy),filters:o.state,dateError:c}),p=ce(s,t.page,t.rowsPerPage),l=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!s.length&&l||!s.length,j=h.useCallback(a=>{const u=r.filter(H=>H.id!==a);k.success("Delete success!"),m(u),t.onUpdatePageDeleteRow(p.length)},[p.length,t,r]),U=h.useCallback(()=>{const a=r.filter(u=>!t.selected.includes(u.id));k.success("Delete success!"),m(a),t.onUpdatePageDeleteRows({totalRowsInPage:p.length,totalRowsFiltered:s.length})},[s.length,p.length,t,r]),_=h.useCallback(a=>{i.push(v.dashboard.order.details(a))},[i]),z=h.useCallback((a,u)=>{t.onResetPage(),o.setState({status:u})},[o,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[e.jsx(re,{heading:"List",links:[{name:"Dashboard",href:v.dashboard.root},{name:"Order",href:v.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(ye,{children:[e.jsx(ve,{value:o.state.status,onChange:z,sx:{px:2.5,boxShadow:a=>`inset 0 -2px 0 0 ${te(a.vars.palette.grey["500Channel"],.08)}`},children:ke.map(a=>e.jsx(De,{iconPosition:"end",value:a.value,label:a.label,icon:e.jsx(N,{variant:(a.value==="all"||a.value===o.state.status)&&"filled"||"soft",color:a.value==="completed"&&"success"||a.value==="pending"&&"warning"||a.value==="cancelled"&&"error"||"default",children:["completed","pending","cancelled","refunded"].includes(a.value)?r.filter(u=>u.status===a.value).length:r.length})},a.value))}),e.jsx(Se,{filters:o,onResetPage:t.onResetPage,dateError:c}),l&&e.jsx(Pe,{filters:o,totalResults:s.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(w,{sx:{position:"relative"},children:[e.jsx(de,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(u=>u.id)),action:e.jsx(se,{title:"Delete",children:e.jsx(f,{color:"primary",onClick:n.onTrue,children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(ae,{sx:{minHeight:444},children:e.jsxs(ge,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(pe,{order:t.order,orderBy:t.orderBy,headLabel:Re,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(u=>u.id))}),e.jsxs(je,{children:[s.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>e.jsx(Te,{row:a,selected:t.selected.includes(a.id),onSelectRow:()=>t.onSelectRow(a.id),onDeleteRow:()=>j(a.id),onViewRow:()=>_(a.id)},a.id)),e.jsx(xe,{height:t.dense?56:76,emptyRows:he(t.page,t.rowsPerPage,s.length)}),e.jsx(ue,{notFound:d})]})]})})]}),e.jsx(me,{page:t.page,dense:t.dense,count:s.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]}),e.jsx(W,{open:n.value,onClose:n.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{U(),n.onFalse()},children:"Delete"})})]})}function Ae({inputData:t,comparator:i,filters:n,dateError:r}){const{status:m,name:o,startDate:c,endDate:s}=n,p=t.map((l,d)=>[l,d]);return p.sort((l,d)=>{const j=i(l[0],d[0]);return j!==0?j:l[1]-d[1]}),t=p.map(l=>l[0]),o&&(t=t.filter(l=>l.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||l.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||l.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),m!=="all"&&(t=t.filter(l=>l.status===m)),r||c&&s&&(t=t.filter(l=>oe(l.createdAt,c,s))),t}export{Xe as O};
