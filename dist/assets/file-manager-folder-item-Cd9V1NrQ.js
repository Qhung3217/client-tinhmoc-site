import{r as l,aX as V,j as e,B as x,d8 as $,f as se,ad as v,I as r,cw as q,aZ as J,ap as N,au as U,cz as X,p as y,h as c,t as D,a$ as ne,b3 as re,dc as ae,T as A,cy as ie,q as te,cM as le,l as ce,dA as de,c0 as he}from"./index-DBDTQgzR.js";import{u as xe}from"./use-copy-to-clipboard-LhhYpgg1.js";import{f as Z}from"./format-number-BCGWgCIZ.js";import{C as pe}from"./confirm-dialog-1h5Sb0me.js";import{L as H}from"./ListItemText-BWLBNFBh.js";import{M as F}from"./MenuItem-CXtkif-l.js";import{D as K}from"./dialogTitleClasses-dlJ2Dc6b.js";import{D as Q}from"./DialogTitle-ft8XbdqB.js";import{I as me}from"./InputAdornment-Bkememc_.js";import{D as Y}from"./DialogActions-DxkFb4E3.js";import{a as ue,F as je}from"./file-thumbnail-NlKfSiYl.js";import{C as G}from"./Checkbox-BGAset9J.js";import{U as ge}from"./upload-CrEYFCVg.js";import"./image-DnyeokJc.js";import{D as ve}from"./DialogContent-Dc9_4vKy.js";import{A as fe}from"./AvatarGroup-DbGsAKHO.js";function _({person:a}){const[o,t]=l.useState(a.permission),n=V(),d=l.useCallback(h=>{t(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(x,{component:"li",sx:{display:"flex",alignItems:"center",py:1},children:[e.jsx($,{alt:a.name,src:a.avatarUrl,sx:{mr:2}}),e.jsx(H,{primary:a.name,secondary:e.jsx(se,{title:a.email,children:e.jsx("span",{children:a.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(v,{size:"small",color:"inherit",endIcon:e.jsx(r,{width:16,icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),onClick:n.onOpen,sx:{flexShrink:0,fontSize:h=>h.typography.pxToRem(12),...n.open&&{bgcolor:"action.selected"}},children:["Can ",o]})]}),e.jsx(q,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsxs(J,{children:[e.jsxs(F,{selected:o==="view",onClick:()=>{n.onClose(),d("view")},children:[e.jsx(r,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(F,{selected:o==="edit",onClick:()=>{n.onClose(),d("edit")},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(N,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{n.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}function ee({open:a,shared:o,onClose:t,onCopyLink:n,inviteEmail:d,onChangeInvite:h,...p}){const m=o&&!!o.length;return e.jsxs(K,{fullWidth:!0,maxWidth:"xs",open:a,onClose:t,...p,children:[e.jsx(Q,{children:" Invite "}),e.jsx(x,{sx:{px:3},children:h&&e.jsx(U,{fullWidth:!0,value:d,placeholder:"Email",onChange:h,InputProps:{endAdornment:e.jsx(me,{position:"end",children:e.jsx(v,{color:"inherit",variant:"contained",disabled:!d,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}})}),m&&e.jsx(X,{sx:{height:60*5,px:3},children:e.jsx(x,{component:"ul",children:o.map(i=>e.jsx(_,{person:i},i.id))})}),e.jsxs(Y,{sx:{justifyContent:"space-between"},children:[n&&e.jsx(v,{startIcon:e.jsx(r,{icon:"eva:link-2-fill"}),onClick:n,children:"Copy link"}),t&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:t,children:"Close"})]})]})}function Ce({item:a,open:o,onClose:t,onDelete:n,favorited:d,onFavorite:h,onCopyLink:p,...m}){const{name:i,size:j,url:b,type:g,shared:u,modifiedAt:w}=a,f=u&&!!u.length,k=y(!0),C=y(),I=y(!0),[M,P]=l.useState(""),[S,R]=l.useState(a.tags.slice(0,3)),W=l.useCallback(s=>{P(s.target.value)},[]),L=l.useCallback(s=>{R(s)},[]),O=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(D,{size:"small",onClick:k.onToggle,children:e.jsx(r,{icon:k.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),k.value&&e.jsx(ne,{multiple:!0,freeSolo:!0,options:a.tags.map(s=>s),getOptionLabel:s=>s,defaultValue:a.tags.slice(0,3),value:S,onChange:(s,T)=>{L(T)},renderOption:(s,T)=>l.createElement("li",{...s,key:T},T),renderTags:(s,T)=>s.map((B,oe)=>l.createElement(re,{...T({index:oe}),size:"small",variant:"soft",label:B,key:B})),renderInput:s=>e.jsx(U,{...s,placeholder:"#Add a tags"})})]}),z=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(D,{size:"small",onClick:I.onToggle,children:e.jsx(r,{icon:I.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),I.value&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),Z(j)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),ae(w)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),ue(g)]})]})]}),E=e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(A,{variant:"subtitle2",children:" Share with "}),e.jsx(D,{size:"small",color:"primary",onClick:C.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),f&&e.jsx(x,{component:"ul",sx:{pl:2,pr:1},children:u.map(s=>e.jsx(_,{person:s},s.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(ie,{open:o,onClose:t,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...m,children:[e.jsxs(X,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(A,{variant:"h6",children:" Info "}),e.jsx(G,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:d,onChange:h})]}),e.jsxs(c,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(je,{imageView:!0,file:g==="folder"?g:b,sx:{width:"auto",height:"auto",alignSelf:"flex-start"},slotProps:{img:{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover"},icon:{width:64,height:64}}}),e.jsx(A,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:i}),e.jsx(N,{sx:{borderStyle:"dashed"}}),O,z]}),E]}),e.jsx(x,{sx:{p:2.5},children:e.jsx(v,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),onClick:n,children:"Delete"})})]}),e.jsx(ee,{open:C.value,shared:u,inviteEmail:M,onChangeInvite:W,onCopyLink:p,onClose:()=>{C.onFalse(),P("")}})]})}function Oe({sx:a,link:o,title:t,onOpen:n,subtitle:d,collapse:h,onCollapse:p,...m}){return e.jsxs(c,{direction:"row",alignItems:"center",sx:{mb:3,...a},...m,children:[e.jsxs(c,{flexGrow:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(A,{variant:"h6",children:[" ",t," "]}),e.jsx(D,{size:"small",color:"primary",onClick:n,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),e.jsx(x,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:d})]}),o&&e.jsx(v,{href:o,component:te,size:"small",color:"inherit",endIcon:e.jsx(r,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View all"}),p&&e.jsx(D,{onClick:p,children:e.jsx(r,{icon:h?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function ye({open:a,onClose:o,onCreate:t,onUpdate:n,folderName:d,onChangeFolderName:h,title:p="Upload files",...m}){const[i,j]=l.useState([]);l.useEffect(()=>{a||j([])},[a]);const b=l.useCallback(f=>{j([...i,...f])},[i]),g=()=>{o(),console.info("ON UPLOAD")},u=f=>{const k=i.filter(C=>C!==f);j(k)},w=()=>{j([])};return e.jsxs(K,{fullWidth:!0,maxWidth:"sm",open:a,onClose:o,...m,children:[e.jsxs(Q,{sx:{p:f=>f.spacing(3,3,2,3)},children:[" ",p," "]}),e.jsxs(ve,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(t||n)&&e.jsx(U,{fullWidth:!0,label:"Folder name",value:d,onChange:h,sx:{mb:3}}),e.jsx(ge,{multiple:!0,value:i,onDrop:b,onRemove:u})]}),e.jsxs(Y,{children:[e.jsx(v,{variant:"contained",startIcon:e.jsx(r,{icon:"eva:cloud-upload-fill"}),onClick:g,children:"Upload"}),!!i.length&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:w,children:"Remove all"}),(t||n)&&e.jsx(c,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(v,{variant:"soft",onClick:t||n,children:n?"Save":"Create"})})]})]})}function Ge({sx:a,folder:o,selected:t,onSelect:n,onDelete:d,...h}){var z,E;const{copy:p}=xe(),m=y(),i=V(),j=y(),b=y(),g=y(),u=y(),w=y(o.isFavorited),[f,k]=l.useState(""),[C,I]=l.useState(o.name),M=l.useCallback(s=>{k(s.target.value)},[]),P=l.useCallback(s=>{I(s.target.value)},[]),S=l.useCallback(()=>{le.success("Copied!"),p(o.url)},[p,o.url]),R=e.jsxs(c,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(G,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:w.value,onChange:w.onToggle,inputProps:{name:"checkbox-favorite","aria-label":"Checkbox favorite"}}),e.jsx(D,{color:i.open?"inherit":"default",onClick:i.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]}),W=e.jsx(x,{onMouseEnter:g.onTrue,onMouseLeave:g.onFalse,sx:{width:36,height:36},children:(g.value||t)&&n?e.jsx(G,{checked:t,onClick:n,icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),sx:{width:1,height:1}}):e.jsx(x,{component:"img",src:`${ce.site.basePath}/assets/icons/files/ic-folder.svg`,sx:{width:1,height:1}})}),L=e.jsx(H,{onClick:b.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[Z(o.size),e.jsx(x,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),O=e.jsx(fe,{max:3,sx:{[`& .${de.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(z=o.shared)==null?void 0:z.map(s=>e.jsx($,{alt:s.name,src:s.avatarUrl},s.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(he,{variant:"outlined",sx:{gap:1,p:2.5,maxWidth:222,display:"flex",borderRadius:2,cursor:"pointer",position:"relative",bgcolor:"transparent",flexDirection:"column",alignItems:"flex-start",...(g.value||t)&&{bgcolor:"background.paper",boxShadow:s=>s.customShadows.z20},...a},...h,children:[W,R,L,!!((E=o==null?void 0:o.shared)!=null&&E.length)&&O]}),e.jsx(q,{open:i.open,anchorEl:i.anchorEl,onClose:i.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(J,{children:[e.jsxs(F,{onClick:()=>{i.onClose(),S()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(F,{onClick:()=>{i.onClose(),m.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(F,{onClick:()=>{i.onClose(),u.onTrue()},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(N,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{j.onTrue(),i.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(Ce,{item:o,favorited:w.value,onFavorite:w.onToggle,onCopyLink:S,open:b.value,onClose:b.onFalse,onDelete:()=>{b.onFalse(),d()}}),e.jsx(ee,{open:m.value,shared:o.shared,inviteEmail:f,onChangeInvite:M,onCopyLink:S,onClose:()=>{m.onFalse(),k("")}}),e.jsx(ye,{open:u.value,onClose:u.onFalse,title:"Edit Folder",onUpdate:()=>{u.onFalse(),I(C),console.info("UPDATE FOLDER",C)},folderName:C,onChangeFolderName:P}),e.jsx(pe,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(v,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}export{Ce as F,ee as a,Oe as b,Ge as c,ye as d};
