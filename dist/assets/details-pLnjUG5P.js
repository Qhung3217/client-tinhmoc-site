import{j as e,B as p,h as l,T as v,t as j,I as n,dl as y,eW as P,ap as C,r as g,d8 as O,aw as h,ad as I,aX as S,q as f,f as u,cw as D,aZ as B,eX as G,cY as R,w,eY as F,eZ as A,H as E,l as _}from"./index-DBDTQgzR.js";import{u as z}from"./use-params-DWxX5-f_.js";import{I as T}from"./image-DnyeokJc.js";import"./tour-new-edit-form-CcSf742V.js";import{u as M}from"./use-tabs-BOCpEQDR.js";import{L as N}from"./label-BGslDkJ8.js";import{M as U}from"./markdown-qDu_3wTa.js";import{u as H,L as $}from"./use-light-box-Cn1L5wfJ.js";import{C as W}from"./Checkbox-BGAset9J.js";import{L as V}from"./Link-yd2Vpoa3.js";import{L as k}from"./ListItemText-BWLBNFBh.js";import{P as X}from"./Pagination-C4g-ZYj3.js";import{C as Y}from"./Card-mcWuHIxM.js";import{L as Z}from"./LoadingButton-DeHkswpr.js";import{M as q}from"./MenuItem-CXtkif-l.js";import{T as J,a as K}from"./Tabs-CiqW0Pdf.js";import"./form-provider-DF3B5Qy9.js";import"./Rating-BR5M_yat.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-CEeV8CTK.js";import"./index-DN576CaX.js";import"./Slider-pDTHwapb.js";import"./RadioGroup-6rz6-lxn.js";import"./FormGroup-BmjtyYIO.js";import"./FormControlLabel-CbzyZjs_.js";import"./index-Dlen6Mw8.js";import"./countries-DSLisFCy.js";import"./search-not-found-CAvx5TG6.js";import"./InputAdornment-Bkememc_.js";import"./country-select-BgdOjkuY.js";import"./upload-CrEYFCVg.js";import"./preview-multi-file-BxqREHj2.js";import"./format-number-BCGWgCIZ.js";import"./file-thumbnail-NlKfSiYl.js";import"./upload-box-Bzq2MqhI.js";import"./upload-avatar-DWbCayes.js";import"./DatePicker-_e2J2jCh.js";import"./DialogActions-DxkFb4E3.js";import"./ListItem-B2jXz8Io.js";import"./listItemButtonClasses-D6WOaO0u.js";import"./dialogTitleClasses-dlJ2Dc6b.js";import"./DialogContent-Dc9_4vKy.js";import"./MobileDateTimePicker-CBzJXPzz.js";import"./schema-helper-CBd3neqn.js";import"./CardHeader-CIF5Mw-j.js";import"./html-to-markdown-DWwIAVnh.js";import"./index-DixO9l5f.js";import"./listItemTextClasses-YBd3Kn_2.js";import"./LastPage-hAb5R5fv.js";import"./CircularProgress-27YVWvuS.js";import"./KeyboardArrowRight-BXWDGu1s.js";function Q({tour:s}){const i=(s==null?void 0:s.images.map(a=>({src:a})))||[],{selected:c,open:r,onOpen:o,onClose:m}=H(i),t=e.jsxs(e.Fragment,{children:[e.jsxs(p,{gap:1,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},sx:{mb:{xs:3,md:5}},children:[e.jsx(T,{alt:i[0].src,src:i[0].src,ratio:"1/1",onClick:()=>o(i[0].src),sx:{borderRadius:2,cursor:"pointer",transition:a=>a.transitions.create("opacity"),"&:hover":{opacity:.8}}}),e.jsx(p,{gap:1,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",children:i.slice(1,5).map(a=>e.jsx(T,{alt:a.src,src:a.src,ratio:"1/1",onClick:()=>o(a.src),sx:{borderRadius:2,cursor:"pointer",transition:L=>L.transitions.create("opacity"),"&:hover":{opacity:.8}}},a.src))})]}),e.jsx($,{index:c,slides:i,open:r,close:m})]}),b=e.jsxs(e.Fragment,{children:[e.jsxs(l,{direction:"row",sx:{mb:3},children:[e.jsx(v,{variant:"h4",sx:{flexGrow:1},children:s==null?void 0:s.name}),e.jsx(j,{children:e.jsx(n,{icon:"solar:share-bold"})}),e.jsx(W,{defaultChecked:!0,color:"error",icon:e.jsx(n,{icon:"solar:heart-outline"}),checkedIcon:e.jsx(n,{icon:"solar:heart-bold"}),inputProps:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}})]}),e.jsxs(l,{spacing:3,direction:"row",flexWrap:"wrap",alignItems:"center",children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(n,{icon:"eva:star-fill",sx:{color:"warning.main"}}),e.jsx(p,{component:"span",sx:{typography:"subtitle2"},children:s==null?void 0:s.ratingNumber}),e.jsx(V,{sx:{color:"text.secondary"},children:"(234 reviews)"})]}),e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(n,{icon:"mingcute:location-fill",sx:{color:"error.main"}}),s==null?void 0:s.destination]}),e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"subtitle2"},children:[e.jsx(n,{icon:"solar:flag-bold",sx:{color:"info.main"}}),e.jsx(p,{component:"span",sx:{typography:"body2",color:"text.secondary"},children:"Guide by"}),s==null?void 0:s.tourGuides.map(a=>a.name).join(", ")]})]})]}),x=e.jsx(p,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[{label:"Available",value:`${y(s==null?void 0:s.available.startDate)} - ${y(s==null?void 0:s.available.endDate)}`,icon:e.jsx(n,{icon:"solar:calendar-date-bold"})},{label:"Contact name",value:s==null?void 0:s.tourGuides.map(a=>a.phoneNumber).join(", "),icon:e.jsx(n,{icon:"solar:user-rounded-bold"})},{label:"Durations",value:s==null?void 0:s.durations,icon:e.jsx(n,{icon:"solar:clock-circle-bold"})},{label:"Contact phone",value:s==null?void 0:s.tourGuides.map(a=>a.name).join(", "),icon:e.jsx(n,{icon:"solar:phone-bold"})}].map(a=>e.jsxs(l,{spacing:1.5,direction:"row",children:[a.icon,e.jsx(k,{primary:a.label,secondary:a.value,primaryTypographyProps:{mb:.5,typography:"body2",color:"text.secondary"},secondaryTypographyProps:{component:"span",color:"text.primary",typography:"subtitle2"}})]},a.label))}),d=e.jsxs(e.Fragment,{children:[e.jsx(U,{children:s==null?void 0:s.content}),e.jsxs(l,{spacing:2,children:[e.jsx(v,{variant:"h6",children:" Services"}),e.jsx(p,{rowGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:P.map(a=>e.jsxs(l,{spacing:1,direction:"row",alignItems:"center",sx:{...(s==null?void 0:s.services.includes(a.label))&&{color:"text.disabled"}},children:[e.jsx(n,{icon:"eva:checkmark-circle-2-outline",sx:{color:"primary.main",...(s==null?void 0:s.services.includes(a.label))&&{color:"text.disabled"}}}),a.label]},a.label))})]})]});return e.jsxs(e.Fragment,{children:[t,e.jsxs(l,{sx:{maxWidth:720,mx:"auto"},children:[b,e.jsx(C,{sx:{borderStyle:"dashed",my:5}}),x,e.jsx(C,{sx:{borderStyle:"dashed",mt:5,mb:2}}),d]})]})}function ee({bookers:s}){const[i,c]=g.useState([]),r=g.useCallback(o=>{const m=i.includes(o)?i.filter(t=>t!==o):[...i,o];c(m)},[i]);return e.jsxs(e.Fragment,{children:[e.jsx(p,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:s==null?void 0:s.map(o=>e.jsx(se,{booker:o,selected:i.includes(o.id),onSelected:()=>r(o.id)},o.id))}),e.jsx(X,{count:10,sx:{mt:{xs:5,md:8},mx:"auto"}})]})}function se({booker:s,selected:i,onSelected:c}){return e.jsxs(Y,{sx:{p:3,gap:2,display:"flex"},children:[e.jsx(O,{alt:s.name,src:s.avatarUrl,sx:{width:48,height:48}}),e.jsxs(l,{spacing:2,flexGrow:1,children:[e.jsx(k,{primary:s.name,secondary:e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(n,{icon:"solar:users-group-rounded-bold",width:16}),s.guests," guests"]}),secondaryTypographyProps:{mt:.5,component:"span",typography:"caption",color:"text.disabled"}}),e.jsxs(l,{spacing:1,direction:"row",children:[e.jsx(j,{size:"small",color:"error",sx:{borderRadius:1,bgcolor:r=>h(r.vars.palette.error.mainChannel,.08),"&:hover":{bgcolor:r=>h(r.vars.palette.error.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"solar:phone-bold"})}),e.jsx(j,{size:"small",color:"info",sx:{borderRadius:1,bgcolor:r=>h(r.vars.palette.info.mainChannel,.08),"&:hover":{bgcolor:r=>h(r.vars.palette.info.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"solar:chat-round-dots-bold"})}),e.jsx(j,{size:"small",color:"primary",sx:{borderRadius:1,bgcolor:r=>h(r.vars.palette.primary.mainChannel,.08),"&:hover":{bgcolor:r=>h(r.vars.palette.primary.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"fluent:mail-24-filled"})})]})]}),e.jsx(I,{size:"small",variant:i?"text":"outlined",color:i?"success":"inherit",startIcon:i?e.jsx(n,{width:18,icon:"eva:checkmark-fill",sx:{mr:-.75}}):null,onClick:c,children:i?"Approved":"Approve"})]},s.id)}function ae({publish:s,backLink:i,editLink:c,liveLink:r,publishOptions:o,onChangePublish:m,sx:t,...b}){const x=S();return e.jsxs(e.Fragment,{children:[e.jsxs(l,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...t},...b,children:[e.jsx(I,{component:f,href:i,startIcon:e.jsx(n,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(p,{sx:{flexGrow:1}}),s==="published"&&e.jsx(u,{title:"Go Live",children:e.jsx(j,{component:f,href:r,children:e.jsx(n,{icon:"eva:external-link-fill"})})}),e.jsx(u,{title:"Edit",children:e.jsx(j,{component:f,href:c,children:e.jsx(n,{icon:"solar:pen-bold"})})}),e.jsx(Z,{color:"inherit",variant:"contained",loading:!s,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(n,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:s})]}),e.jsx(D,{open:x.open,anchorEl:x.anchorEl,onClose:x.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(B,{children:o.map(d=>e.jsxs(q,{selected:d.value===s,onClick:()=>{x.onClose(),m(d.value)},children:[d.value==="published"&&e.jsx(n,{icon:"eva:cloud-upload-fill"}),d.value==="draft"&&e.jsx(n,{icon:"solar:file-text-bold"}),d.label]},d.value))})})]})}function ie({tour:s}){const[i,c]=g.useState(s==null?void 0:s.publish),r=M("content"),o=g.useCallback(t=>{c(t)},[]),m=e.jsx(J,{value:r.value,onChange:r.onChange,sx:{mb:{xs:3,md:5}},children:G.map(t=>e.jsx(K,{iconPosition:"end",value:t.value,label:t.label,icon:t.value==="bookers"?e.jsx(N,{variant:"filled",children:s==null?void 0:s.bookers.length}):""},t.value))});return e.jsxs(R,{children:[e.jsx(ae,{backLink:w.dashboard.tour.root,editLink:w.dashboard.tour.edit(`${s==null?void 0:s.id}`),liveLink:"#",publish:i||"",onChangePublish:o,publishOptions:F}),m,r.value==="content"&&e.jsx(Q,{tour:s}),r.value==="bookers"&&e.jsx(ee,{bookers:s==null?void 0:s.bookers})]})}const re={title:`Tour details | Dashboard - ${_.site.name}`};function as(){const{id:s=""}=z(),i=A.find(c=>c.id===s);return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsxs("title",{children:[" ",re.title]})}),e.jsx(ie,{tour:i})]})}export{as as default};
