import{aF as $,B as k,h as j,aw as f,cL as I,r as c,j as n,t as w,I as O,ad as N,bb as z,w as E,H as F,l as T}from"./index-u4c5uTy0.js";import{C as W}from"./custom-breadcrumbs-IydSAGRK.js";import{C as H}from"./component-hero-D-RhbPvf.js";import{b as G,e as p,s as L,j as V,T as X,k as K,h as Y,f as q,M as J,S as Q,D as U,u as Z,a as P,m as ee,n as ne,o as ae,l as re,d as te}from"./sortable.esm-CtgjjDJO.js";import{S as ie}from"./component-template-C49kzpsS.js";import"./Link-BJNZ9OZB.js";import"./use-event-listener-DZKjvttE.js";import"./Card-Ro7Utuy1.js";import"./CardHeader-CNvgM0Ym.js";import"./CardContent-C9QmhadV.js";const t={item:"dnd__item",itemWrap:"dnd__item__wrap",removeBtn:"dnd__remove__btn",state:{sorting:"state-sorting",dragging:"state-dragging",dragOverlay:"state-drag-overlay"}},oe=$(k)(()=>({flexShrink:0,display:"flex",transform:"translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1))",transformOrigin:"0 0",touchAction:"manipulation",[`&.${t.state.dragOverlay}`]:{zIndex:999}})),le=$(j)(({theme:a})=>({...a.typography.h2,width:"100%",outline:"none",overflow:"hidden",textAlign:"center",position:"relative",padding:a.spacing(5),transformOrigin:"50% 50%",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",borderRadius:a.shape.borderRadius*2,backgroundColor:a.vars.palette.common.white,transition:a.transitions.create(["box-shadow"]),color:f(a.vars.palette.text.disabledChannel,.24),border:`solid 1px ${f(a.vars.palette.grey["500Channel"],.16)}`,[I.dark]:{backgroundColor:a.vars.palette.grey[900]},"&:hover":{[`& .${t.removeBtn}`]:{opacity:.48}},[`& .${t.removeBtn}`]:{opacity:0,transition:a.transitions.create(["opacity"])},[`&.${t.state.dragOverlay}`]:{backdropFilter:"blur(6px)",boxShadow:a.customShadows.z20,color:a.vars.palette.text.primary,backgroundColor:f(a.vars.palette.common.whiteChannel,.48),[I.dark]:{backgroundColor:f(a.vars.palette.grey["900Channel"],.48)}},[`&.${t.state.dragging}`]:{opacity:.24,backgroundColor:f(a.vars.palette.grey["500Channel"],.12)}})),de=c.forwardRef(({item:a,stateProps:e,onRemove:l,sx:m,...i},d)=>{c.useEffect(()=>{if(e!=null&&e.dragOverlay)return document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""}},[e==null?void 0:e.dragOverlay]);const g=t.itemWrap.concat((e==null?void 0:e.dragOverlay)&&` ${t.state.dragging}`||(e==null?void 0:e.dragOverlay)&&` ${t.state.sorting}`||(e==null?void 0:e.dragOverlay)&&` ${t.state.dragOverlay}`||""),u=t.item.concat((e==null?void 0:e.dragging)&&` ${t.state.dragging}`||(e==null?void 0:e.sorting)&&` ${t.state.sorting}`||(e==null?void 0:e.dragOverlay)&&` ${t.state.dragOverlay}`||"");return n.jsx(oe,{ref:d,component:"li",className:g,sx:{...!!(e!=null&&e.transition)&&{transition:e.transition},...!!(e!=null&&e.transform)&&{"--translate-x":`${Math.round(e.transform.x)}px`,"--translate-y":`${Math.round(e.transform.y)}px`,"--scale-x":`${e.transform.scaleX}`,"--scale-y":`${e.transform.scaleY}`}},children:n.jsxs(le,{className:u,"data-cypress":"draggable-item",sx:m,...i,children:[a,n.jsxs(j,{direction:"row",sx:{top:6,right:6,zIndex:9,position:"absolute"},children:[n.jsx(w,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,size:"small",onClick:l,className:t.removeBtn,children:n.jsx(O,{icon:"solar:close-circle-bold"})}),n.jsx(w,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,...e==null?void 0:e.handleProps,...e==null?void 0:e.listeners,size:"small",children:n.jsx(O,{icon:"nimbus:drag-dots"})})]})]})})}),D=c.memo(de),se={sideEffects:P({styles:{active:{opacity:"0.5"}}})};function C({itemCount:a=12,swap:e=!1,layout:l="grid"}){const m=[...Array(a)].map((r,o)=>o+1),[i,d]=c.useState(m),g=G(p(K),p(X),p(V,{coordinateGetter:L})),u=c.useRef(!0),y=Math.floor(Math.random()*200),[s,h]=c.useState(null),v=r=>i.indexOf(r),b=s?v(s):-1,A=e?ee:ne,S=e?ae:re,R=e?({id:r,items:o,activeIndex:x,overIndex:M})=>S(o,x,M).indexOf(r):void 0;c.useEffect(()=>{s||(u.current=!0)},[s]);const B=()=>{d([...i,y])},_=r=>{const o=i.filter(x=>x!==r);d(o)};return n.jsxs(j,{alignItems:"flex-end",children:[n.jsx(N,{variant:"contained",onClick:B,children:"+ Add item"}),n.jsxs(Y,{id:"dnd-grid",sensors:g,collisionDetection:q,measuring:{droppable:{strategy:J.Always}},onDragStart:({active:r})=>{r&&h(r.id)},onDragEnd:({over:r})=>{if(h(null),r){const o=v(r.id);b!==o&&d(x=>S(x,b,o))}},children:[n.jsx(Q,{items:i,strategy:A,children:n.jsx(k,{component:"ul",sx:{py:3,gap:2,width:1,...l==="grid"&&{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"}},...l==="vertical"&&{display:"flex",flexDirection:"column"},...l==="horizontal"&&{display:"flex",overflowX:"auto",flexDirection:"row",[`& .${t.itemWrap}`]:{maxWidth:180}}},children:i.map((r,o)=>n.jsx(me,{id:r,index:o,getNewIndex:R,onRemove:()=>_(r)},r))})}),n.jsx(z,{children:n.jsx(U,{dropAnimation:se,children:s?n.jsx(D,{item:i[b],stateProps:{dragOverlay:!0}}):null})})]})]})}const ce=a=>te({...a,wasDragging:!0});function me({id:a,index:e,onRemove:l,getNewIndex:m}){const{isSorting:i,transform:d,listeners:g,attributes:u,isDragging:y,setNodeRef:s,transition:h,setActivatorNodeRef:v}=Z({id:a,getNewIndex:m,animateLayoutChanges:ce});return n.jsx(D,{ref:s,item:a,"data-id":a,"data-index":e,onRemove:l,stateProps:{listeners:g,transform:d,transition:h,sorting:i,dragging:y,dragOverlay:y,handleProps:{ref:v}},...u})}function ge(){const a=[{name:"Grid",component:n.jsx(C,{swap:!0})},{name:"Vertical",component:n.jsx(C,{layout:"vertical",itemCount:4})},{name:"Horizontal",component:n.jsx(C,{layout:"horizontal",itemCount:3})}];return n.jsxs(n.Fragment,{children:[n.jsx(H,{children:n.jsx(W,{heading:"Dnd",links:[{name:"Components",href:E.components},{name:"Dnd"}],moreLink:["https://docs.dndkit.com/"]})}),n.jsx(ie,{data:a})]})}const ue={title:`Dnd | Components - ${T.site.name}`};function Ie(){return n.jsxs(n.Fragment,{children:[n.jsx(F,{children:n.jsxs("title",{children:[" ",ue.title]})}),n.jsx(ge,{})]})}export{Ie as default};
