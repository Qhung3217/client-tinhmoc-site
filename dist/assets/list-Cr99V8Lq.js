import{j as e,p as E,n as I,dP as S,r,dN as L,w as l,cY as N,ad as p,q as B,I as d,e4 as G,cM as k,H as v,l as F}from"./index-DBDTQgzR.js";import"./category-new-edit-form-CwmkvMHN.js";import{E as u}from"./empty-content-CrThrvhQ.js";import{C as O}from"./confirm-dialog-1h5Sb0me.js";import{C as A}from"./custom-breadcrumbs-Cq6vi18c.js";import{C as H}from"./Card-mcWuHIxM.js";import{D as P,g as T,G as h}from"./DataGrid-YGhc6_n5.js";import"./form-provider-DF3B5Qy9.js";import"./Rating-BR5M_yat.js";import"./visuallyHidden-Dan1xhjv.js";import"./editor-CEeV8CTK.js";import"./index-DN576CaX.js";import"./Slider-pDTHwapb.js";import"./RadioGroup-6rz6-lxn.js";import"./FormGroup-BmjtyYIO.js";import"./FormControlLabel-CbzyZjs_.js";import"./index-Dlen6Mw8.js";import"./countries-DSLisFCy.js";import"./search-not-found-CAvx5TG6.js";import"./MenuItem-CXtkif-l.js";import"./listItemTextClasses-YBd3Kn_2.js";import"./ListItemText-BWLBNFBh.js";import"./InputAdornment-Bkememc_.js";import"./country-select-BgdOjkuY.js";import"./Checkbox-BGAset9J.js";import"./upload-CrEYFCVg.js";import"./preview-multi-file-BxqREHj2.js";import"./format-number-BCGWgCIZ.js";import"./file-thumbnail-NlKfSiYl.js";import"./upload-box-Bzq2MqhI.js";import"./upload-avatar-DWbCayes.js";import"./image-DnyeokJc.js";import"./DatePicker-_e2J2jCh.js";import"./DialogActions-DxkFb4E3.js";import"./ListItem-B2jXz8Io.js";import"./listItemButtonClasses-D6WOaO0u.js";import"./dialogTitleClasses-dlJ2Dc6b.js";import"./DialogContent-Dc9_4vKy.js";import"./MobileDateTimePicker-CBzJXPzz.js";import"./Tabs-CiqW0Pdf.js";import"./KeyboardArrowRight-BXWDGu1s.js";import"./index-DixO9l5f.js";import"./CardHeader-CIF5Mw-j.js";import"./LoadingButton-DeHkswpr.js";import"./CircularProgress-27YVWvuS.js";import"./DialogTitle-ft8XbdqB.js";import"./Link-yd2Vpoa3.js";import"./ListItemIcon-D8IlJ1j6.js";import"./ClickAwayListener-BbJWI6yy.js";import"./Skeleton-ClMJhwxT.js";import"./TablePagination-DLsZRYWB.js";import"./LastPage-hAb5R5fv.js";import"./TableCell-Cyflqqsm.js";function V({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.id})}function $({params:o}){return e.jsx("div",{style:{paddingLeft:`${o.row.level*20}px`},children:o.row.name})}function X({params:o}){return o.row.createBy.email}function f(o,n=0,s=null){let a=[];return o.forEach(i=>{a.push({...i,level:n,parentId:s,categories:[]}),i.categories&&i.categories.length>0&&(a=a.concat(f(i.categories,n+1,i.id)))}),a}const _={category:!1,id:!1},U=["category","actions"];function q(){const o=E(),n=I(),{categories:s,categoriesLoading:a}=S(),[i,g]=r.useState([]),[m,x]=r.useState([]),[C,b]=r.useState(null),[w,j]=r.useState(_);r.useEffect(()=>{if(s.length){const t=f(s);g(t)}},[s]);const y=async t=>{await G(t),k.success("Xóa thành công!")},D=r.useCallback(async()=>{await Promise.all(m.map(t=>L(t.toString())))},[m]),R=r.useCallback(t=>{n.push(l.dashboard.category.edit(t))},[n]),c=[{field:"category",headerName:"Category",filterable:!1},{field:"id",headerName:"Mã loại sản phẩm",sortable:!1,width:160,renderCell:t=>e.jsx(V,{params:t})},{field:"name",headerName:"Loại sản phẩm",flex:1,minWidth:160,hideable:!1,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx($,{params:t})},{field:"createBy",headerName:"Tạo bởi",headerAlign:"center",width:130,editable:!0,align:"center",sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:t=>e.jsx(X,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"Sửa",onClick:()=>R(t.row.name)}),e.jsx(h,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),label:"Xóa",onClick:()=>{y(t.row.id)},sx:{color:"error.main"}})]}],M=()=>c.filter(t=>!U.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(A,{heading:"Danh sách",links:[{name:"Quản trị",href:l.dashboard.root},{name:"Loại sản phẩm",href:l.dashboard.product.root},{name:"Danh sách"}],action:e.jsx(p,{component:B,href:l.dashboard.category.new,variant:"contained",startIcon:e.jsx(d,{icon:"mingcute:add-line"}),children:"Thêm loại sản phẩm"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(P,{disableRowSelectionOnClick:!0,rows:i,columns:c,loading:a,getRowHeight:()=>"auto",initialState:{pagination:{paginationModel:{pageSize:100,page:1}}},onRowSelectionModelChange:t=>x(t),columnVisibilityModel:w,onColumnVisibilityModelChange:t=>j(t),slots:{noRowsOverlay:()=>e.jsx(u,{}),noResultsOverlay:()=>e.jsx(u,{title:"No results found"})},slotProps:{panel:{anchorEl:C},toolbar:{setFilterButtonEl:b},columnsManagement:{getTogglableColumns:M}},sx:{[`& .${T.cell}`]:{alignItems:"center",display:"inline-flex"}},hideFooter:!0})})]}),e.jsx(O,{open:o.value,onClose:o.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Bạn chắc chắn muốn xóa ",e.jsxs("strong",{children:[" ",m.length," "]})," sản phẩm?"]}),action:e.jsx(p,{variant:"contained",color:"error",onClick:()=>{D(),o.onFalse()},children:"Xóa"})})]})}const z={title:`Loại sản phẩm | ${F.site.name}`};function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx(q,{})]})}export{ze as default};
